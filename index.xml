<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>DaMuWang</title>
    <link>https://damuwangs.github.io/</link>
    <description>Recent content on DaMuWang</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Thu, 09 Dec 2021 00:00:00 +0000</lastBuildDate>
    
        <atom:link href="https://damuwangs.github.io/index.xml" rel="self" type="application/rss+xml" />
    
    
    
        <item>
        <title>React-Hook</title>
        <link>https://damuwangs.github.io/posts/%E7%BC%96%E7%A8%8B/react-hook/</link>
        <pubDate>Thu, 09 Dec 2021 00:00:00 +0000</pubDate>
        
        <guid>https://damuwangs.github.io/posts/%E7%BC%96%E7%A8%8B/react-hook/</guid>
        <description>DaMuWang https://damuwangs.github.io/posts/%E7%BC%96%E7%A8%8B/react-hook/ -&lt;h1 id=&#34;为什么需要portals&#34;&gt;为什么需要Portals&lt;/h1&gt;
&lt;p&gt;Portals能够将子组件渲染到父组件以外的DOM树，他通常用于子组件需要从父组件的容器中脱离出来的场景，有以下场景：&lt;/p&gt;
&lt;h1 id=&#34;参考资料&#34;&gt;参考资料&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&#34;https://zhuanlan.zhihu.com/p/29880992&#34;&gt;传送门：React Portal&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://juejin.cn/post/6892951045685641224&#34;&gt;你真的了解React Portals吗&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
- https://damuwangs.github.io/posts/%E7%BC%96%E7%A8%8B/react-hook/ - </description>
        </item>
    
    
    
        <item>
        <title>React-RenderProps</title>
        <link>https://damuwangs.github.io/posts/%E7%BC%96%E7%A8%8B/react-renderprops/</link>
        <pubDate>Thu, 09 Dec 2021 00:00:00 +0000</pubDate>
        
        <guid>https://damuwangs.github.io/posts/%E7%BC%96%E7%A8%8B/react-renderprops/</guid>
        <description>DaMuWang https://damuwangs.github.io/posts/%E7%BC%96%E7%A8%8B/react-renderprops/ -&lt;h1 id=&#34;为什么需要portals&#34;&gt;为什么需要Portals&lt;/h1&gt;
&lt;p&gt;Portals能够将子组件渲染到父组件以外的DOM树，他通常用于子组件需要从父组件的容器中脱离出来的场景，有以下场景：&lt;/p&gt;
&lt;h1 id=&#34;参考资料&#34;&gt;参考资料&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&#34;https://zhuanlan.zhihu.com/p/29880992&#34;&gt;传送门：React Portal&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://juejin.cn/post/6892951045685641224&#34;&gt;你真的了解React Portals吗&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
- https://damuwangs.github.io/posts/%E7%BC%96%E7%A8%8B/react-renderprops/ - </description>
        </item>
    
    
    
        <item>
        <title>React-Portals</title>
        <link>https://damuwangs.github.io/posts/%E7%BC%96%E7%A8%8B/react-portals/</link>
        <pubDate>Mon, 29 Nov 2021 00:00:00 +0000</pubDate>
        
        <guid>https://damuwangs.github.io/posts/%E7%BC%96%E7%A8%8B/react-portals/</guid>
        <description>DaMuWang https://damuwangs.github.io/posts/%E7%BC%96%E7%A8%8B/react-portals/ -&lt;h1 id=&#34;为什么需要portals&#34;&gt;为什么需要Portals&lt;/h1&gt;
&lt;p&gt;Portals能够将子组件渲染到父组件以外的DOM树，他通常用于子组件需要从父组件的容器中脱离出来的场景，有以下场景：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Dialog对话框&lt;/li&gt;
&lt;li&gt;Tooltip文字提示&lt;/li&gt;
&lt;li&gt;Popover弹出框&lt;/li&gt;
&lt;li&gt;Loader全局loader&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;比如某个组件在渲染时，在某种条件下需要显示一个Dialog，最直观的做法，就是直接在JSX中把Dialog画出来，像下面代码的样子&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-jsx&#34; data-lang=&#34;jsx&#34;&gt;&amp;lt;&lt;span style=&#34;color:#ff79c6&#34;&gt;div&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;class&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;foo&amp;#34;&lt;/span&gt;&amp;gt;
   &amp;lt;&lt;span style=&#34;color:#ff79c6&#34;&gt;div&lt;/span&gt;&amp;gt; ... &amp;lt;/&lt;span style=&#34;color:#ff79c6&#34;&gt;div&lt;/span&gt;&amp;gt;
   { needDialog &lt;span style=&#34;color:#ff79c6&#34;&gt;?&lt;/span&gt; &amp;lt;&lt;span style=&#34;color:#ff79c6&#34;&gt;Dialog&lt;/span&gt; /&amp;gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;null&lt;/span&gt; }
&amp;lt;/&lt;span style=&#34;color:#ff79c6&#34;&gt;div&lt;/span&gt;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;问题是，Dialog最终渲染产生的HTML就与上面JSX产生的HTML产生嵌套了，类似下面这样&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;&amp;lt;&lt;span style=&#34;color:#ff79c6&#34;&gt;div&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;class&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;foo&amp;#34;&lt;/span&gt;&amp;gt;
   &amp;lt;&lt;span style=&#34;color:#ff79c6&#34;&gt;div&lt;/span&gt;&amp;gt; ... &amp;lt;/&lt;span style=&#34;color:#ff79c6&#34;&gt;div&lt;/span&gt;&amp;gt;
   &amp;lt;&lt;span style=&#34;color:#ff79c6&#34;&gt;div&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;class&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;dialog&amp;#34;&lt;/span&gt;&amp;gt;Dialog Content&amp;lt;/&lt;span style=&#34;color:#ff79c6&#34;&gt;div&lt;/span&gt;&amp;gt;
&amp;lt;/&lt;span style=&#34;color:#ff79c6&#34;&gt;div&lt;/span&gt;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;对于对话框应该是一个独立的组件，通常应该显示在屏幕的最中间，现在Dialog被包在其它组件中，要用CSS的position属性控制Dialog位置，就要从Dialog往上一直到body都没有其它position是relative的元素干扰。还有一点，Dialog的样式，因为包含在其它元素中，各种样式纠缠，CSS样式太容易搞成一坨浆糊了。&lt;/p&gt;
&lt;p&gt;我们既希望在组件的JSX中选择使用Dialog，把Dialog用的像普通组件一样，但是又希望Dialog内容显示在另一个地方，就需要Portals上场了。&lt;/p&gt;
&lt;p&gt;Portals就是建立一个“传送门”，让Dialog这样的组件在表示层和其它组件没有任何差异，但是渲染的东西却像经过传送门一样出现在另一个地方&lt;/p&gt;
&lt;p&gt;当我们需要在正常的DOM结构之外呈现子组件时，React Portals非常有用，而不需要通过React组件树层次结构破坏事件传播的默认行为，这在渲染例如弹窗、提示时非常有用&lt;/p&gt;
&lt;h1 id=&#34;react-v16的portals支持&#34;&gt;React v16的Portals支持&lt;/h1&gt;
&lt;p&gt;在某个组件中需要使用modal弹框，大多数情况下可以使用fixed定位让这个弹框全局展示，但是特殊情况下，这个modal弹框可能会显示不正常。这个时候如果使用了portals的方式，使modal的dom结构脱离父组件的容器，就可以规避这种问题&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-typescript&#34; data-lang=&#34;typescript&#34;&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;// 定义弹框组件
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;const&lt;/span&gt; Modal &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; ({message, isOpen, onClose, children}) &lt;span style=&#34;color:#ff79c6&#34;&gt;=&amp;gt;&lt;/span&gt; {
  &lt;span style=&#34;color:#ff79c6&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#ff79c6&#34;&gt;!&lt;/span&gt;isOpen) &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;null&lt;/span&gt;
  &lt;span style=&#34;color:#6272a4&#34;&gt;// 创建portals并挂载到body中  
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; ReactDOM.createPortal(
    &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;div className&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;modal&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;gt;&lt;/span&gt;
      &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;span&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;gt;&lt;/span&gt;{message}&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;/span&amp;gt;
      &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;button onClick&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;{onClose}&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;gt;&lt;/span&gt;Close&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;/button&amp;gt;
    &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;/div&amp;gt;
  , &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;document&lt;/span&gt;.body)
}
&lt;span style=&#34;color:#6272a4&#34;&gt;// 弹框使用
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;function&lt;/span&gt; Component() {
  &lt;span style=&#34;color:#ff79c6&#34;&gt;const&lt;/span&gt; [open, setOpen] &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; useState(&lt;span style=&#34;color:#ff79c6&#34;&gt;false&lt;/span&gt;)
  &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; (
    &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;div className&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;component&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;gt;&lt;/span&gt;
      &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;button onClick&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;{() &lt;span style=&#34;color:#ff79c6&#34;&gt;=&amp;gt;&lt;/span&gt; setOpen(&lt;span style=&#34;color:#ff79c6&#34;&gt;true&lt;/span&gt;)}&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;gt;&amp;lt;&lt;/span&gt;/button&amp;gt;
      &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;Modal
        message&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;Hello World!&amp;#34;&lt;/span&gt;
        isOpen&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;{open}
        onClose&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;{() &lt;span style=&#34;color:#ff79c6&#34;&gt;=&amp;gt;&lt;/span&gt; setOpen(&lt;span style=&#34;color:#ff79c6&#34;&gt;false&lt;/span&gt;)}
      &lt;span style=&#34;color:#ff79c6&#34;&gt;/&amp;gt;&lt;/span&gt;
    &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;/div&amp;gt;
  )
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;上面的代码能够保证，无论子组件嵌套多深，这个modal能够和root同一级。使用浏览器检查dom结构，就可以看到如下结构&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://damuwangs.github.io/img/React-Portals/React-Portals.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;h1 id=&#34;portals的事件冒泡&#34;&gt;Portals的事件冒泡&lt;/h1&gt;
&lt;p&gt;v16之前的React Portals实现方法，有一个小小的缺陷，就是Portals是单向的，内容通过Portals传到另一个出口，在那个出口DOM上发生的事件不会冒泡传送回Portals的父组件的&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;&amp;lt;&lt;span style=&#34;color:#ff79c6&#34;&gt;div&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;onClick&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;{onDialogClick}&lt;/span&gt;&amp;gt;   
   &amp;lt;&lt;span style=&#34;color:#ff79c6&#34;&gt;Dialog&lt;/span&gt;&amp;gt;
     What ever shit
   &amp;lt;/&lt;span style=&#34;color:#ff79c6&#34;&gt;Dialog&lt;/span&gt;&amp;gt;
&amp;lt;/&lt;span style=&#34;color:#ff79c6&#34;&gt;div&lt;/span&gt;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;在Dialog画出的内容上点击，onClick是不会被触发的。&lt;/p&gt;
&lt;p&gt;在v16中，通过Portals渲染出去的DOM，事件是会从传送门的入口端冒出来的，上面的onDialogClick也就会被调用到了&lt;/p&gt;
&lt;h1 id=&#34;参考资料&#34;&gt;参考资料&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&#34;https://zhuanlan.zhihu.com/p/29880992&#34;&gt;传送门：React Portal&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://juejin.cn/post/6892951045685641224&#34;&gt;你真的了解React Portals吗&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
- https://damuwangs.github.io/posts/%E7%BC%96%E7%A8%8B/react-portals/ - </description>
        </item>
    
    
    
        <item>
        <title>Html-meta标签</title>
        <link>https://damuwangs.github.io/posts/%E7%BC%96%E7%A8%8B/html-meta%E6%A0%87%E7%AD%BE/</link>
        <pubDate>Fri, 26 Nov 2021 00:00:00 +0000</pubDate>
        
        <guid>https://damuwangs.github.io/posts/%E7%BC%96%E7%A8%8B/html-meta%E6%A0%87%E7%AD%BE/</guid>
        <description>DaMuWang https://damuwangs.github.io/posts/%E7%BC%96%E7%A8%8B/html-meta%E6%A0%87%E7%AD%BE/ -&lt;h1 id=&#34;概念&#34;&gt;概念&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;元数据(metadata)是关于数据的信息&lt;/p&gt;
&lt;p&gt;标签提供关于HTML文档的元数据。元数据不会显示在页面上，但是对于机器是可读的。&lt;/p&gt;
&lt;p&gt;典型的情况是，meta元素被用于规定页面的描述、关键词、文档的作者、最后修改时间以及其他元数据。&lt;/p&gt;
&lt;p&gt;标签始终位于head元素中。&lt;/p&gt;
&lt;p&gt;元数据可用于浏览器（如何显示内容或重新加载页面），搜索引擎（关键词），或者其他web服务&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&#34;属性&#34;&gt;属性&lt;/h1&gt;
&lt;h2 id=&#34;必需属性&#34;&gt;必需属性&lt;/h2&gt;
&lt;p&gt;meta的必须属性是content，并不是说meta标签里一定要有content，而是当有http-equiv或name属性的时候，一定要有content属性对其进行说明。&lt;/p&gt;
&lt;p&gt;例：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;&amp;lt;&lt;span style=&#34;color:#ff79c6&#34;&gt;meta&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;name&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;keywords&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;content&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;HTML,ASP,PHP,SQL&amp;#34;&lt;/span&gt;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;可选属性&#34;&gt;可选属性&lt;/h2&gt;
&lt;h3 id=&#34;http-equiv&#34;&gt;http-equiv&lt;/h3&gt;
&lt;p&gt;添加http头部内容，对一些自定义的，或者需要额外添加的http头部内容，需要发送到浏览器中，我们就可以使用这个属性。&lt;/p&gt;
&lt;p&gt;例如我们不想使用js来重定向，用http头部内容控制，就可以这样控制&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;&amp;lt;&lt;span style=&#34;color:#ff79c6&#34;&gt;meta&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;http-equiv&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;Refresh&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;content&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;5;url=http://www.baidu.com&amp;#34;&lt;/span&gt; /&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;在页面head中加入这个后，5秒钟后就会跳转到指定的页面&lt;/p&gt;
&lt;h3 id=&#34;name&#34;&gt;name&lt;/h3&gt;
&lt;p&gt;供浏览器进行解析，对于一些浏览器兼容性问题，name是最常用的，当然有个前提就是浏览器能够解析你写进去的name属性才可以&lt;/p&gt;
&lt;p&gt;例：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;&amp;lt;&lt;span style=&#34;color:#ff79c6&#34;&gt;meta&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;name&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;renderer&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;content&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;webkit&amp;#34;&lt;/span&gt;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;这个meta标签的意思就是告诉浏览器，用webkit内核进行解析，前提是浏览器有webkit内核才可以。当然看到这个你可能会有疑问，这个renderer是从哪里冒出来的？这个就是在对应的浏览器的开发文档里就会有表明的，例如这个renderer是在360浏览器里说明的。&lt;a href=&#34;http://se.360.cn/v6/help/meta.html&#34;&gt;360浏览器内核控制Meta标签说明文档&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&#34;meta标签总结&#34;&gt;meta标签总结&lt;/h1&gt;
&lt;h2 id=&#34;charset&#34;&gt;charset&lt;/h2&gt;
&lt;p&gt;声明文档使用的字符编码，解决乱码问题主要用的就是它，值得一提的是，这个charset一定要写第一行，不然可能会产生乱码了。&lt;/p&gt;
&lt;p&gt;chartset有两种写法&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;&amp;lt;&lt;span style=&#34;color:#ff79c6&#34;&gt;meta&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;charset&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;utf-8&amp;#34;&lt;/span&gt;&amp;gt;
&amp;lt;&lt;span style=&#34;color:#ff79c6&#34;&gt;meta&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;http-equiv&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;Content-Type&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;content&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;text/html; charset=utf-8&amp;#34;&lt;/span&gt;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;seo-优化部分&#34;&gt;SEO 优化部分&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&amp;lt;!-- 页面标题&amp;lt;title&amp;gt;标签(head 头部必须) --&amp;gt;&lt;/span&gt;
&amp;lt;&lt;span style=&#34;color:#ff79c6&#34;&gt;title&lt;/span&gt;&amp;gt;your title&amp;lt;/&lt;span style=&#34;color:#ff79c6&#34;&gt;title&lt;/span&gt;&amp;gt;
&lt;span style=&#34;color:#6272a4&#34;&gt;&amp;lt;!-- 页面关键词 keywords --&amp;gt;&lt;/span&gt;
&amp;lt;&lt;span style=&#34;color:#ff79c6&#34;&gt;meta&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;name&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;keywords&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;content&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;your keywords&amp;#34;&lt;/span&gt;&amp;gt;
&lt;span style=&#34;color:#6272a4&#34;&gt;&amp;lt;!-- 页面描述内容 description --&amp;gt;&lt;/span&gt;
&amp;lt;&lt;span style=&#34;color:#ff79c6&#34;&gt;meta&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;name&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;description&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;content&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;your description&amp;#34;&lt;/span&gt;&amp;gt;
&lt;span style=&#34;color:#6272a4&#34;&gt;&amp;lt;!-- 定义网页作者 author --&amp;gt;&lt;/span&gt;
&amp;lt;&lt;span style=&#34;color:#ff79c6&#34;&gt;meta&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;name&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;author&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;content&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;author,email address&amp;#34;&lt;/span&gt;&amp;gt;
&lt;span style=&#34;color:#6272a4&#34;&gt;&amp;lt;!-- 定义网页搜索引擎索引方式，robotterms 是一组使用英文逗号「,」分割的值，通常有如下几种取值：none，noindex，nofollow，all，index和follow。 --&amp;gt;&lt;/span&gt;
&amp;lt;&lt;span style=&#34;color:#ff79c6&#34;&gt;meta&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;name&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;robots&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;content&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;index,follow&amp;#34;&lt;/span&gt;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;viewport&#34;&gt;viewport&lt;/h2&gt;
&lt;p&gt;主要影响移动端布局的&lt;/p&gt;
&lt;p&gt;之前用h5开发移动项目遇到过字体被缩放的特别小的问题，后来新增了viewport属性解决了，具体如下：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;&amp;lt;&lt;span style=&#34;color:#ff79c6&#34;&gt;meta&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;name&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;viewport&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;content&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;width=device-width, user-scalable=no&amp;#34;&lt;/span&gt;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;content参数：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;width viewport 宽度(数值/device-width)&lt;/li&gt;
&lt;li&gt;height viewport 高度(数值/device-height)&lt;/li&gt;
&lt;li&gt;initial-scale 初始缩放比例&lt;/li&gt;
&lt;li&gt;maximum-scale 最大缩放比例&lt;/li&gt;
&lt;li&gt;minimum-scale 最小缩放比例&lt;/li&gt;
&lt;li&gt;user-scalable 是否允许用户缩放(yes/no)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;各浏览器平台&#34;&gt;各浏览器平台&lt;/h2&gt;
&lt;p&gt;一些常用的浏览器meta标签设置参考下方链接&lt;/p&gt;
&lt;h1 id=&#34;参考资料&#34;&gt;参考资料&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&#34;https://blog.csdn.net/yc123h/article/details/51356143&#34;&gt;meta标签的作用及整理&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.cnblogs.com/argenbarbie/p/8026595.html&#34;&gt;chrome手机模拟器显示尺寸不正确&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
- https://damuwangs.github.io/posts/%E7%BC%96%E7%A8%8B/html-meta%E6%A0%87%E7%AD%BE/ - </description>
        </item>
    
    
    
        <item>
        <title>React-高阶组件</title>
        <link>https://damuwangs.github.io/posts/%E7%BC%96%E7%A8%8B/react-%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6/</link>
        <pubDate>Wed, 24 Nov 2021 00:00:00 +0000</pubDate>
        
        <guid>https://damuwangs.github.io/posts/%E7%BC%96%E7%A8%8B/react-%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6/</guid>
        <description>DaMuWang https://damuwangs.github.io/posts/%E7%BC%96%E7%A8%8B/react-%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6/ -&lt;h1 id=&#34;概念&#34;&gt;概念&lt;/h1&gt;
&lt;p&gt;一个高阶组件只是一个包装了另外一个React组件的React组件&lt;/p&gt;
&lt;h1 id=&#34;基础高阶组件&#34;&gt;基础高阶组件&lt;/h1&gt;
&lt;h2 id=&#34;装饰器模式&#34;&gt;装饰器模式&lt;/h2&gt;
&lt;p&gt;高阶组件可以看做是装饰器模式(Decorator Pattern)在React的实现。即允许向一个现有的对象添加新的功能，同时又不改变其结构，属于包装模式(Wrapper Pattern)的一种&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-typescript&#34; data-lang=&#34;typescript&#34;&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;// 定义高阶组件
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;const&lt;/span&gt; withHeader &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; (WrappedComponent) &lt;span style=&#34;color:#ff79c6&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;extends&lt;/span&gt; React.Component {
    render() {
      &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; (
        &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;div&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;gt;&lt;/span&gt;
          &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;div className&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;demo-header&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;gt;&lt;/span&gt;高阶组件&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;/div&amp;gt;
          &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;WrappedComponent {...&lt;span style=&#34;color:#ff79c6&#34;&gt;this&lt;/span&gt;.props}&lt;span style=&#34;color:#ff79c6&#34;&gt;/&amp;gt;&lt;/span&gt;
        &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;/div&amp;gt;
      )
    }
  }

&lt;span style=&#34;color:#6272a4&#34;&gt;// 调用高阶组件  
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;@withHeader&lt;/span&gt;
&lt;span style=&#34;color:#ff79c6&#34;&gt;class&lt;/span&gt; Demo &lt;span style=&#34;color:#ff79c6&#34;&gt;extends&lt;/span&gt; React.Component {
  render() {
    &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; (
      &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;div&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;gt;&lt;/span&gt;普通组件&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;/div&amp;gt;
    )
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;组件命名&#34;&gt;组件命名&lt;/h2&gt;
&lt;p&gt;当通过高阶组件来包装一个组件时，你会丢失原先 WrappedComponent 的名字，可能会给开发和 debug 造成影响&lt;/p&gt;
&lt;p&gt;我们改写一下上述的高阶组件代码，增加了getDisplayName函数以及静态属性displayName，此时再去观察DOM Tree&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-typescript&#34; data-lang=&#34;typescript&#34;&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;// 获取组件名称
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;function&lt;/span&gt; getDisplayName(component) {
    &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; component.displayName &lt;span style=&#34;color:#ff79c6&#34;&gt;||&lt;/span&gt; component.name &lt;span style=&#34;color:#ff79c6&#34;&gt;||&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;Component&amp;#39;&lt;/span&gt;
}

&lt;span style=&#34;color:#6272a4&#34;&gt;// 定义高阶组件
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;const&lt;/span&gt; withHeader &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; WrappedComponent &lt;span style=&#34;color:#ff79c6&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;extends&lt;/span&gt; React.Component {
    &lt;span style=&#34;color:#6272a4&#34;&gt;// 设置高阶组件别名
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#ff79c6&#34;&gt;static&lt;/span&gt; displayName &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;`HOC(&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;${&lt;/span&gt;getDisplayName(WrappedComponent)&lt;span style=&#34;color:#f1fa8c&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;)`&lt;/span&gt;
    render() {
      &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; (
        &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;div&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;gt;&lt;/span&gt;
          &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;div className&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;demo-header&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;gt;&lt;/span&gt;我是标题&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;/div&amp;gt;
          &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;WrappedComponent {...&lt;span style=&#34;color:#ff79c6&#34;&gt;this&lt;/span&gt;.props}&lt;span style=&#34;color:#ff79c6&#34;&gt;/&amp;gt;&lt;/span&gt;
        &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;/div&amp;gt;
      )
    }
  }

&lt;span style=&#34;color:#6272a4&#34;&gt;// 调用高阶组件  
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;@withHeader&lt;/span&gt;
&lt;span style=&#34;color:#ff79c6&#34;&gt;class&lt;/span&gt; Demo &lt;span style=&#34;color:#ff79c6&#34;&gt;extends&lt;/span&gt; React.Component {
  render() {
    &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; (
      &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;div&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;gt;&lt;/span&gt;我是普通组件&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;/div&amp;gt;
    )
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;之前高阶组件仅显示HOC，命名后如下显示&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://damuwangs.github.io/img/React-%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6/%E7%BB%84%E4%BB%B6%E5%91%BD%E5%90%8D.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;组件传参&#34;&gt;组件传参&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;柯里化 Curry&lt;/p&gt;
&lt;p&gt;概念：只传递函数的一部分参数来调用它，让它返回一个函数去处理剩下的参数&lt;/p&gt;
&lt;p&gt;函数签名：fun(params)(otherParams)&lt;/p&gt;
&lt;p&gt;应用：在React里，通过柯里化，我们可以通过传入不同的参数来得到不同的高阶组件&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-typescript&#34; data-lang=&#34;typescript&#34;&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;// 定义高阶组件
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;const&lt;/span&gt; withHeader &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; title &lt;span style=&#34;color:#ff79c6&#34;&gt;=&amp;gt;&lt;/span&gt; WrappedComponent &lt;span style=&#34;color:#ff79c6&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;extends&lt;/span&gt; React.Component {
    render() {
      &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; (
        &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;div&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;gt;&lt;/span&gt;
          {&lt;span style=&#34;color:#6272a4&#34;&gt;/* 获取参数并使用 */&lt;/span&gt;}
          &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;div className&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;demo-header&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;gt;&lt;/span&gt;{title}&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;/div&amp;gt;
          &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;WrappedComponent {...&lt;span style=&#34;color:#ff79c6&#34;&gt;this&lt;/span&gt;.props}&lt;span style=&#34;color:#ff79c6&#34;&gt;/&amp;gt;&lt;/span&gt;
        &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;/div&amp;gt;
      )
    }
  }
  
&lt;span style=&#34;color:#6272a4&#34;&gt;// 调用高阶组件,在括号内定义参数  
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;@withHeader&lt;/span&gt;(&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;我是标题&amp;#39;&lt;/span&gt;)
&lt;span style=&#34;color:#ff79c6&#34;&gt;class&lt;/span&gt; Demo &lt;span style=&#34;color:#ff79c6&#34;&gt;extends&lt;/span&gt; React.Component {
  render() {
    &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; (
      &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;div&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;gt;&lt;/span&gt;普通组件&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;/div&amp;gt;
    )
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h1 id=&#34;属性代理&#34;&gt;属性代理&lt;/h1&gt;
&lt;h2 id=&#34;更改-props&#34;&gt;更改 props&lt;/h2&gt;
&lt;p&gt;在修改或删除重要 props 的时候要小心，应该给高阶组件的 props 指定命名空间（namespace），以防破坏从外传递给 WrappedComponent 的 props&lt;/p&gt;
&lt;p&gt;下面的例子中定义了一个新的newProps传给组件&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-typescript&#34; data-lang=&#34;typescript&#34;&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;// 定义高阶组件
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;const&lt;/span&gt; withHeader &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; WrappedComponent &lt;span style=&#34;color:#ff79c6&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;extends&lt;/span&gt; React.Component {
    &lt;span style=&#34;color:#6272a4&#34;&gt;// 定义点击事件
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;    handleClick() {
      console.log(&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;click&amp;#39;&lt;/span&gt;)
    }
    render() {
      &lt;span style=&#34;color:#6272a4&#34;&gt;// 定义变量  
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;      &lt;span style=&#34;color:#ff79c6&#34;&gt;const&lt;/span&gt; newProps &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; {
        user&lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;王大木&amp;#39;&lt;/span&gt;
      }        
      &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; (
        &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;div&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;gt;&lt;/span&gt;
          &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;div className&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;demo-header&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;gt;&lt;/span&gt;高阶组件&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;/div&amp;gt;
          {&lt;span style=&#34;color:#6272a4&#34;&gt;/* 通过props传递变量和点击事件 */&lt;/span&gt;}
          &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;WrappedComponent {...&lt;span style=&#34;color:#ff79c6&#34;&gt;this&lt;/span&gt;.props} {...newProps} handleClick&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;{&lt;span style=&#34;color:#ff79c6&#34;&gt;this&lt;/span&gt;.handleClick}&lt;span style=&#34;color:#ff79c6&#34;&gt;/&amp;gt;&lt;/span&gt;
        &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;/div&amp;gt;
      )
    }
  }

&lt;span style=&#34;color:#6272a4&#34;&gt;// 调用高阶组件  
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;@withHeader&lt;/span&gt;
&lt;span style=&#34;color:#ff79c6&#34;&gt;class&lt;/span&gt; Demo &lt;span style=&#34;color:#ff79c6&#34;&gt;extends&lt;/span&gt; React.Component {
  render() {
    &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; (
      &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;div&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;gt;&lt;/span&gt;
        &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;div&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;gt;&lt;/span&gt;普通组件&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;/div&amp;gt;
        {&lt;span style=&#34;color:#6272a4&#34;&gt;/* 读取变量 */&lt;/span&gt;}
        &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;div&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;gt;&lt;/span&gt;我是newProps：{&lt;span style=&#34;color:#ff79c6&#34;&gt;this&lt;/span&gt;.props.user}&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;/div&amp;gt;
	    {&lt;span style=&#34;color:#6272a4&#34;&gt;/* 调用点击事件 */&lt;/span&gt;}	
        &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;button onClick&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;{&lt;span style=&#34;color:#ff79c6&#34;&gt;this&lt;/span&gt;.props.handleClick}&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;gt;&lt;/span&gt;点击&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;/button&amp;gt;
      &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;/div&amp;gt;
    )
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;通过-refs-获取组件实例&#34;&gt;通过 refs 获取组件实例&lt;/h2&gt;
&lt;p&gt;当我们包装Usual的时候，想获取到它的实例怎么办，可以通过引用(ref),在Usual组件挂载的时候，会执行ref的回调函数，在HOC中取到组件的实例。通过打印，可以看到它的props， state，都是可以取到的。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-typescript&#34; data-lang=&#34;typescript&#34;&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;// 定义高阶组件
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;const&lt;/span&gt; withHeader &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; WrappedComponent &lt;span style=&#34;color:#ff79c6&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;extends&lt;/span&gt; React.Component {
   &lt;span style=&#34;color:#6272a4&#34;&gt;// 装载完成，读取组件并打印
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;   componentDidMount() {
      console.log(&lt;span style=&#34;color:#ff79c6&#34;&gt;this&lt;/span&gt;.instanceComponent, &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;instanceComponent&amp;#39;&lt;/span&gt;)
    }
    render() {
      &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; (
        &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;div&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;gt;&lt;/span&gt;
          &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;div className&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;demo-header&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;gt;&lt;/span&gt;高阶组件&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;/div&amp;gt;
          &lt;span style=&#34;color:#6272a4&#34;&gt;// 引用ref,在组件挂载的时候，会执行ref的回调函数，在HOC中取到组件的实例
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;          &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;WrappedComponent {...&lt;span style=&#34;color:#ff79c6&#34;&gt;this&lt;/span&gt;.props} ref&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;{instanceComponent &lt;span style=&#34;color:#ff79c6&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;this&lt;/span&gt;.instanceComponent &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; instanceComponent}&lt;span style=&#34;color:#ff79c6&#34;&gt;/&amp;gt;&lt;/span&gt;
        &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;/div&amp;gt;
      )
    }
  }

&lt;span style=&#34;color:#6272a4&#34;&gt;// 调用高阶组件  
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;@withHeader&lt;/span&gt;
&lt;span style=&#34;color:#ff79c6&#34;&gt;class&lt;/span&gt; Demo &lt;span style=&#34;color:#ff79c6&#34;&gt;extends&lt;/span&gt; React.Component {
  &lt;span style=&#34;color:#ff79c6&#34;&gt;constructor&lt;/span&gt;(props) {
    &lt;span style=&#34;color:#ff79c6&#34;&gt;super&lt;/span&gt;(props)
      &lt;span style=&#34;color:#6272a4&#34;&gt;// 定义state
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;	  &lt;span style=&#34;color:#ff79c6&#34;&gt;this&lt;/span&gt;.state &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; {
		test&lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;普通组件state&amp;#39;&lt;/span&gt;
	}
  }
  render() {
    &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; (
      &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;div&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;gt;&lt;/span&gt;
        &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;div&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;gt;&lt;/span&gt;普通组件&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;/div&amp;gt;
      &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;/div&amp;gt;
    )
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;抽象-state&#34;&gt;抽象 state&lt;/h2&gt;
&lt;p&gt;通过 { props, 回调函数 } 传递给wrappedComponent组件，通过回调函数获取state。用的比较多的就是react处理表单的时候。&lt;/p&gt;
&lt;p&gt;通常react在处理表单的时候，一般使用的是受控组件，即把input都做成受控的，改变value的时候，用onChange事件同步到state中&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-typescript&#34; data-lang=&#34;typescript&#34;&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;// 定义高阶组件
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;const&lt;/span&gt; withHeader &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; WrappedComponent &lt;span style=&#34;color:#ff79c6&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;extends&lt;/span&gt; React.Component {
  &lt;span style=&#34;color:#ff79c6&#34;&gt;constructor&lt;/span&gt;() {
    &lt;span style=&#34;color:#ff79c6&#34;&gt;super&lt;/span&gt;()
    &lt;span style=&#34;color:#6272a4&#34;&gt;// 定义state 
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#ff79c6&#34;&gt;this&lt;/span&gt;.state &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; {
      fields&lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt; {},
    }
  }
  &lt;span style=&#34;color:#6272a4&#34;&gt;// 通过fieldName绑定控件，触发调用onChange  
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;  getField &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; fieldName &lt;span style=&#34;color:#ff79c6&#34;&gt;=&amp;gt;&lt;/span&gt; {
    &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; {
      onChange: &lt;span style=&#34;color:#8be9fd&#34;&gt;this.onChange&lt;/span&gt;(fieldName),
    }
  }
  &lt;span style=&#34;color:#6272a4&#34;&gt;// 文本框onChange事件  
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;  onChange &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; key &lt;span style=&#34;color:#ff79c6&#34;&gt;=&amp;gt;&lt;/span&gt; e &lt;span style=&#34;color:#ff79c6&#34;&gt;=&amp;gt;&lt;/span&gt; {
    console.log(&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;key = &amp;#39;&lt;/span&gt;,key)
    console.log(&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;e = &amp;#39;&lt;/span&gt;,e)      
    &lt;span style=&#34;color:#ff79c6&#34;&gt;const&lt;/span&gt; { fields } &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;this&lt;/span&gt;.state
    &lt;span style=&#34;color:#6272a4&#34;&gt;// 将组件视图变化绑定给高阶组件的state
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;    fields[key] &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; e.target.value
    &lt;span style=&#34;color:#ff79c6&#34;&gt;this&lt;/span&gt;.setState({
      fields,
    })
  }
  &lt;span style=&#34;color:#6272a4&#34;&gt;// 提交点击事件  
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;  handleSubmit &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; () &lt;span style=&#34;color:#ff79c6&#34;&gt;=&amp;gt;&lt;/span&gt; {
    console.log(&lt;span style=&#34;color:#ff79c6&#34;&gt;this&lt;/span&gt;.state.fields)
  }

  render() {
    &lt;span style=&#34;color:#ff79c6&#34;&gt;const&lt;/span&gt; props &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; {
      ...&lt;span style=&#34;color:#ff79c6&#34;&gt;this&lt;/span&gt;.props,
      handleSubmit: &lt;span style=&#34;color:#8be9fd&#34;&gt;this.handleSubmit&lt;/span&gt;,&lt;span style=&#34;color:#6272a4&#34;&gt;// 提交点击事件
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;      getField: &lt;span style=&#34;color:#8be9fd&#34;&gt;this.getField&lt;/span&gt;,&lt;span style=&#34;color:#6272a4&#34;&gt;// 文本框值
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;    }
    &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; (
      &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;WrappedComponent {...props}&lt;span style=&#34;color:#ff79c6&#34;&gt;/&amp;gt;&lt;/span&gt;
	)
  }
}

&lt;span style=&#34;color:#6272a4&#34;&gt;// 调用高阶组件
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;@withHeader&lt;/span&gt;
 &lt;span style=&#34;color:#ff79c6&#34;&gt;class&lt;/span&gt; Login &lt;span style=&#34;color:#ff79c6&#34;&gt;extends&lt;/span&gt; React.Component {
  render() {
    &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; (
      &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;div&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;gt;&lt;/span&gt;
        &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;div&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;gt;&lt;/span&gt;
          &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;label id&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;username&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;gt;&lt;/span&gt;账户&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;/label&amp;gt;
          {&lt;span style=&#34;color:#6272a4&#34;&gt;/* 绑定文本框 */&lt;/span&gt;}			
          &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;input name&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;username&amp;#34;&lt;/span&gt; {...&lt;span style=&#34;color:#ff79c6&#34;&gt;this&lt;/span&gt;.props.getField(&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;username&amp;#39;&lt;/span&gt;)}&lt;span style=&#34;color:#ff79c6&#34;&gt;/&amp;gt;&lt;/span&gt;
        &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;/div&amp;gt;
        &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;div&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;gt;&lt;/span&gt;
          &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;label id&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;password&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;gt;&lt;/span&gt;密码&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;/label&amp;gt;
		 {&lt;span style=&#34;color:#6272a4&#34;&gt;/* 绑定文本框 */&lt;/span&gt;}			
          &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;input name&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;password&amp;#34;&lt;/span&gt; {...&lt;span style=&#34;color:#ff79c6&#34;&gt;this&lt;/span&gt;.props.getField(&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;password&amp;#39;&lt;/span&gt;)}&lt;span style=&#34;color:#ff79c6&#34;&gt;/&amp;gt;&lt;/span&gt;
        &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;/div&amp;gt;
		{&lt;span style=&#34;color:#6272a4&#34;&gt;/* 调用点击事件 */&lt;/span&gt;}
        &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;div onClick&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;{&lt;span style=&#34;color:#ff79c6&#34;&gt;this&lt;/span&gt;.props.handleSubmit}&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;gt;&lt;/span&gt;提交&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;/div&amp;gt;
      &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;/div&amp;gt;
    )
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;这里把state，onChange等方法都放到HOC里，其实是遵从的react组件的一种规范，子组件简单，傻瓜，负责展示，逻辑与操作放到Container。比如说我们在HOC获取到用户名密码之后，再去做其他操作，就方便多了，而state，处理函数放到Form组件里，只会让Form更加笨重，承担了本不属于它的工作，这样我们可能其他地方也需要用到这个组件，但是处理方式稍微不同，就很麻烦了&lt;/p&gt;
&lt;h2 id=&#34;包装其它-elements&#34;&gt;包装其它 elements&lt;/h2&gt;
&lt;p&gt;出于操作样式、布局或其它目的，你可以将 WrappedComponent 与其它组件包装在一起&lt;/p&gt;
&lt;p&gt;上面的装饰器模式例子就是将高阶组件与组件包装在了一起&lt;/p&gt;
&lt;h1 id=&#34;反向继承&#34;&gt;反向继承&lt;/h1&gt;
&lt;p&gt;返回的高阶组件类继承了 WrappedComponent。这被叫做反向继承是因为 WrappedComponent 被动地被高阶组件继承，而不是 WrappedComponent 去继承 高阶组件。通过这种方式他们之间的关系倒转了。&lt;/p&gt;
&lt;p&gt;反向继承允许高阶组件通过 &lt;strong&gt;this&lt;/strong&gt; 关键词获取 WrappedComponent，意味着它可以获取到 state，props，组件生命周期（component lifecycle）钩子，以及渲染方法（render）&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-typescript&#34; data-lang=&#34;typescript&#34;&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;// 定义高阶组件
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;const&lt;/span&gt; iiHoc &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; WrappedComponent &lt;span style=&#34;color:#ff79c6&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;extends&lt;/span&gt; WrappedComponent {
    &lt;span style=&#34;color:#6272a4&#34;&gt;// 这里重写了组件的生命周期
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#6272a4&#34;&gt;// 如果高阶组件和组件同时定义了相同的生命周期，高阶组件中的会覆盖掉组件中的
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;    componentDidMount(){
      console.log(&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;hoc didmount&amp;#39;&lt;/span&gt;)
    }
    render() {
      &lt;span style=&#34;color:#6272a4&#34;&gt;// 在高阶组件中读取组件的state
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;      console.log(&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;state = &amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#ff79c6&#34;&gt;this&lt;/span&gt;.state)
      &lt;span style=&#34;color:#6272a4&#34;&gt;// 继续渲染WrappedComponent组件  
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;      &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;super&lt;/span&gt;.render()
    }
}

&lt;span style=&#34;color:#6272a4&#34;&gt;// 调用高阶组件
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;@iiHoc&lt;/span&gt;
&lt;span style=&#34;color:#ff79c6&#34;&gt;class&lt;/span&gt; Usual &lt;span style=&#34;color:#ff79c6&#34;&gt;extends&lt;/span&gt; React.Component {
  &lt;span style=&#34;color:#ff79c6&#34;&gt;constructor&lt;/span&gt;() {
    &lt;span style=&#34;color:#ff79c6&#34;&gt;super&lt;/span&gt;()
    &lt;span style=&#34;color:#6272a4&#34;&gt;// 定义state
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#ff79c6&#34;&gt;this&lt;/span&gt;.state &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; {
      usual&lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;usual&amp;#39;&lt;/span&gt;,
    }
  }
  &lt;span style=&#34;color:#6272a4&#34;&gt;// 定义组件的生命周期
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#6272a4&#34;&gt;// 如果高阶组件和组件同时定义了相同的生命周期，高阶组件中的会覆盖掉组件中的
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;  componentDidMount() {
    console.log(&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;didMount&amp;#39;&lt;/span&gt;)
  }

  render() {
    &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; (
      &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;div&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;gt;&lt;/span&gt;Usual&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;/div&amp;gt;
    )
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;渲染劫持&#34;&gt;渲染劫持&lt;/h2&gt;
&lt;p&gt;渲染指的是 WrappedComponent.render 方法&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-typescript&#34; data-lang=&#34;typescript&#34;&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;// 定义高阶组件
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;function&lt;/span&gt; iiHOC(WrappedComponent) {
  &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;extends&lt;/span&gt; WrappedComponent {
    render() {
      &lt;span style=&#34;color:#6272a4&#34;&gt;// 如果 this.props.loggedIn 是 true，这个高阶组件会原封不动地渲染 WrappedComponent  
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;      &lt;span style=&#34;color:#ff79c6&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#ff79c6&#34;&gt;this&lt;/span&gt;.props.loggedIn) {
        &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;super&lt;/span&gt;.render()
      &lt;span style=&#34;color:#6272a4&#34;&gt;// 如果不是 true 则渲染如下内容    
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;      } &lt;span style=&#34;color:#ff79c6&#34;&gt;else&lt;/span&gt; {
        &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;div&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;gt;&lt;/span&gt;渲染&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;/div&amp;gt;
      }
    }
  }
}

&lt;span style=&#34;color:#6272a4&#34;&gt;// 调用高阶组件
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;@iiHOC&lt;/span&gt;
&lt;span style=&#34;color:#ff79c6&#34;&gt;class&lt;/span&gt; Usual &lt;span style=&#34;color:#ff79c6&#34;&gt;extends&lt;/span&gt; React.Component {
  render() {
    &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; (
      &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;div&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;gt;&lt;/span&gt;Usual&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;/div&amp;gt;
    )
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;注意：你不能通过 Props Proxy 来做渲染劫持&lt;/p&gt;
&lt;p&gt;即使你可以通过 WrappedComponent.prototype.render 获取它的 render 方法，你需要自己手动模拟整个实例以及生命周期方法，而不是依靠 React，这是不值当的，应该使用反向继承来做到渲染劫持&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;操作组件state&#34;&gt;操作组件state&lt;/h2&gt;
&lt;p&gt;高阶组件可以 『读取、修改、删除』WrappedComponent 实例的 state，如果需要也可以添加新的 state。&lt;/p&gt;
&lt;p&gt;需要记住的是，你在弄乱 WrappedComponent 的 state，可能会导致破坏一些东西。通常不建议使用高阶组件来读取或添加组件 state，添加 state 需要使用命名空间来防止与 WrappedComponent 的 state 冲突&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-typescript&#34; data-lang=&#34;typescript&#34;&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;// 定义高阶组件
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;export&lt;/span&gt; &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;function&lt;/span&gt; IIHOCDEBUGGER(WrappedComponent) {
  &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;extends&lt;/span&gt; WrappedComponent {
    render() {
      &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; (
        &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;div&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;gt;&lt;/span&gt;
          {&lt;span style=&#34;color:#6272a4&#34;&gt;/* 读取组件props */&lt;/span&gt;}
          &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;p&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;gt;&lt;/span&gt;Props&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;/p&amp;gt; &amp;lt;pre&amp;gt;{JSON.stringify(this.props)}&amp;lt;/pre&amp;gt;
          {&lt;span style=&#34;color:#6272a4&#34;&gt;/* 读取组件state */&lt;/span&gt;}
          &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;p&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;gt;&lt;/span&gt;State&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;/p&amp;gt;&amp;lt;pre&amp;gt;{JSON.stringify(this.state)}&amp;lt;/pre&amp;gt;
          {&lt;span style=&#34;color:#6272a4&#34;&gt;/* 渲染组件 */&lt;/span&gt;}
          {&lt;span style=&#34;color:#ff79c6&#34;&gt;super&lt;/span&gt;.render()}
        &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;/div&amp;gt;
      )
    }
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h1 id=&#34;组合多个高阶组件&#34;&gt;组合多个高阶组件&lt;/h1&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-typescript&#34; data-lang=&#34;typescript&#34;&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;export&lt;/span&gt; &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;function&lt;/span&gt; HOC1(WrappedComponent) {
  &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;extends&lt;/span&gt; WrappedComponent {
    render() {
      &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; (
        &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;div&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;gt;&lt;/span&gt;
          &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;div className&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;demo-header&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;gt;&lt;/span&gt;高阶组件&lt;span style=&#34;color:#bd93f9&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;/div&amp;gt;
          &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;WrappedComponent {...&lt;span style=&#34;color:#ff79c6&#34;&gt;this&lt;/span&gt;.props}&lt;span style=&#34;color:#ff79c6&#34;&gt;/&amp;gt;&lt;/span&gt;
        &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;/div&amp;gt;
      )
    }
  }
}

&lt;span style=&#34;color:#ff79c6&#34;&gt;export&lt;/span&gt; &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;function&lt;/span&gt; HOC2(WrappedComponent) {
  &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;extends&lt;/span&gt; WrappedComponent {
    render() {
      &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; (
        &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;div&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;gt;&lt;/span&gt;
          &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;div className&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;demo-header&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;gt;&lt;/span&gt;高阶组件&lt;span style=&#34;color:#bd93f9&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;/div&amp;gt;
          &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;WrappedComponent {...&lt;span style=&#34;color:#ff79c6&#34;&gt;this&lt;/span&gt;.props}&lt;span style=&#34;color:#ff79c6&#34;&gt;/&amp;gt;&lt;/span&gt;
        &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;/div&amp;gt;
      )
    }
  }
}

&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;@HOC1&lt;/span&gt;
&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;@HOC2&lt;/span&gt;
&lt;span style=&#34;color:#ff79c6&#34;&gt;class&lt;/span&gt; Usual &lt;span style=&#34;color:#ff79c6&#34;&gt;extends&lt;/span&gt; React.Component {
  render() {
    &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; (
      &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;div&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;gt;&lt;/span&gt;普通组件&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt;/div&amp;gt;
    )
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;使用compose可以简化上述过程，也能体现函数式编程的思想&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-typescript&#34; data-lang=&#34;typescript&#34;&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;const&lt;/span&gt; enhance &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; compose(withHeader,withLoading);
&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;@enhance&lt;/span&gt;
&lt;span style=&#34;color:#ff79c6&#34;&gt;class&lt;/span&gt; Demo &lt;span style=&#34;color:#ff79c6&#34;&gt;extends&lt;/span&gt; Component{
    ...
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;组合 Compose
compose可以帮助我们组合任意个高阶函数，例如compose(a,b,c)返回一个新的函数d，函数d依然接受一个函数作为入参，只不过在内部会依次调用c,b,a，从表现层对使用者保持透明&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&#34;参考资料&#34;&gt;参考资料&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&#34;https://zhuanlan.zhihu.com/p/28138664&#34;&gt;深入浅出React高阶组件&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.jianshu.com/p/0aae7d4d9bc1&#34;&gt;深入理解 React 高阶组件&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.cnblogs.com/libin-1/p/7087605.html&#34;&gt;React进阶之高阶组件&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://react.docschina.org/docs/higher-order-components.html#caveats&#34;&gt;高阶组件注意事项&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
- https://damuwangs.github.io/posts/%E7%BC%96%E7%A8%8B/react-%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6/ - </description>
        </item>
    
    
    
        <item>
        <title>UniApp-App签名</title>
        <link>https://damuwangs.github.io/posts/%E7%BC%96%E7%A8%8B/uniapp-app%E7%AD%BE%E5%90%8D/</link>
        <pubDate>Tue, 09 Nov 2021 00:00:00 +0000</pubDate>
        
        <guid>https://damuwangs.github.io/posts/%E7%BC%96%E7%A8%8B/uniapp-app%E7%AD%BE%E5%90%8D/</guid>
        <description>DaMuWang https://damuwangs.github.io/posts/%E7%BC%96%E7%A8%8B/uniapp-app%E7%AD%BE%E5%90%8D/ -&lt;h1 id=&#34;为什么要有签名&#34;&gt;为什么要有签名&lt;/h1&gt;
&lt;p&gt;开发Android的人这么多，完全有可能把类名，包名命名成同样的名字，这个时候该如何区分？所以，这时候就需要签名来区分了，由于开发商可能通过使用相同的Package Name来混淆替换已经安装的程序，签名可以保证报名相同，但是签名不同的包不被替换。
发布过Android应用的朋友们应该都知道，Android APK的发布是需要签名的。签名机制在Android应用和框架中有着十分重要的作用。例如，Android系统禁止更新安装签名不一致的APK；如果应用需要使用system权限，必须保证APK签名与Framework签名一致&lt;/p&gt;
&lt;h1 id=&#34;注意事项&#34;&gt;注意事项&lt;/h1&gt;
&lt;p&gt;应用程序签名的一些方面可能会影响应用程序的开发过程, 尤其是当你计划发布多个应用时. 通常情况下, 对于所有开发者而言,推荐的策略是:在应用程序的整个生命周期,所有的应用程序使用相同的证书签名.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;应用程序升级 – 当发布应用的更新时, 如果想让用户无缝地升级到新版本, 需要继续使用相同的某个或者某一套证书来签名更新包.当系统安装应用的更新时, 它会比较现有版本和新版本的证书. 如果证书吻合, 包括证书数据和顺序都吻合, 那么系统允许更新.如果新版本所做的签名不是匹配的, 那么将需要给应用起一个不同的包名 — 在这种情况下, 用户相当于安装了一个完全的新程序.&lt;/li&gt;
&lt;li&gt;应用程序模块化 – Android允许由相同证书签名的应用程序运行在相同的进程中, 此时系统会将它们作为单个应用程序对待.在这种方式中, 可以按模块化的方式部署应用, 用户可以根据需要独立地更新每一个模块.&lt;/li&gt;
&lt;li&gt;代码/数据 的授权共享 – Android 提供模式匹配的权限控制机制,因此一个应用可以暴露功能给另一个用指定证书签名的应用. 通过用相同证书签名多个应用,以及使用模式匹配的权限检查,应用程序可以以安全的方式共享代码和数据.&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;参考资料&#34;&gt;参考资料&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&#34;https://blog.csdn.net/u011974987/article/details/52415037&#34;&gt;Android中签名、证书、公钥密钥的概念及使用&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
- https://damuwangs.github.io/posts/%E7%BC%96%E7%A8%8B/uniapp-app%E7%AD%BE%E5%90%8D/ - </description>
        </item>
    
    
    
        <item>
        <title>JavaScript-MVC、MVVM模式</title>
        <link>https://damuwangs.github.io/posts/%E7%BC%96%E7%A8%8B/javascript-mvcmvvm%E6%A8%A1%E5%BC%8F/</link>
        <pubDate>Mon, 08 Nov 2021 00:00:00 +0000</pubDate>
        
        <guid>https://damuwangs.github.io/posts/%E7%BC%96%E7%A8%8B/javascript-mvcmvvm%E6%A8%A1%E5%BC%8F/</guid>
        <description>DaMuWang https://damuwangs.github.io/posts/%E7%BC%96%E7%A8%8B/javascript-mvcmvvm%E6%A8%A1%E5%BC%8F/ -&lt;h1 id=&#34;概念&#34;&gt;概念&lt;/h1&gt;
&lt;p&gt;模型（Model）：指数据模型，泛指后端进行的各种业务逻辑处理和数据操控，主要围绕数据库系统展开。后端的处理通常会非常复杂&lt;/p&gt;
&lt;p&gt;视图（View）：视图部分，通常指html等用来对用户展示的一部分&lt;/p&gt;
&lt;p&gt;控制器（Controller）：负责根据用户从&amp;quot;视图层&amp;quot;输入的指令，选取&amp;quot;数据层&amp;quot;中的数据，然后对其进行相应的操作，产生最终结果&lt;/p&gt;
&lt;p&gt;视图模型（ViewModel）：由前端开发人员组织生成和维护的视图数据层。在这一层，前端开发者对从后端获取的 Model 数据进行转换处理，做二次封装，以生成符合 View 层使用预期的视图数据模型。需要注意的是 ViewModel 所封装出来的数据模型包括视图的状态和行为两部分，而 Model 层的数据模型是只包含状态的，比如页面的这一块展示什么，那一块展示什么这些都属于视图状态（展示），而页面加载进来时发生什么，点击这一块发生什么，这一块滚动时发生什么这些都属于视图行为（交互），视图状态和行为都封装在了 ViewModel 里。这样的封装使得 ViewModel 可以完整地去描述 View 层。由于实现了双向绑定，ViewModel 的内容会实时展现在 View 层，这是激动人心的，因为前端开发者再也不必低效又麻烦地通过操纵 DOM 去更新视图，MVVM 框架已经把最脏最累的一块做好了，我们开发者只需要处理和维护 ViewModel，更新数据视图就会自动得到相应更新，真正实现数据驱动开发。看到了吧，View 层展现的不是 Model 层的数据，而是 ViewModel 的数据，由 ViewModel 负责与 Model 层交互，这就完全解耦了 View 层和 Model 层，这个解耦是至关重要的，它是前后端分离方案实施的重要一环&lt;/p&gt;
&lt;h1 id=&#34;mvc&#34;&gt;MVC&lt;/h1&gt;
&lt;p&gt;&lt;img src=&#34;https://damuwangs.github.io/img/JavaScript-MVC%E3%80%81MVP%E3%80%81MVVM%E6%A8%A1%E5%BC%8F/MVC.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;用户端操作View ，Js监听事件绑定DOM数据，传送指令到 Controller&lt;/li&gt;
&lt;li&gt;Controller 完成业务逻辑后，要求 Model 改变数据状态&lt;/li&gt;
&lt;li&gt;Model 将新的数据发送到 View，通过JS操作DOM为View赋值，用户得到反馈&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;如果前端没有框架，只使用原生的html+js，MVC模式可以这样理解：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;将html看成view&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;js看成controller，负责处理用户与应用的交互，响应对view的操作（对事件的监听），调用Model对数据进行操作，完成model与view的同步（根据model的改变，通过选择器对view进行操作）&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;将js的ajax当做Model，也就是数据层，通过ajax从服务器获取数据&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h1 id=&#34;mvvm&#34;&gt;MVVM&lt;/h1&gt;
&lt;p&gt;就像分析MVC是如何合理分配工作的一样，我们需要数据所以有了M，我们需要界面所以有了V，而我们需要找一个地方把M赋值给V来显示，所以有了C，然而我们忽略了一个很重要的操作：&lt;strong&gt;数据解析&lt;/strong&gt;。在MVC出生的年代，手机APP的数据往往都比较简单，没有现在那么复杂，所以那时的数据解析很可能一步就解决了，所以既然有这样一个问题要处理，而面向对象的思想就是用类和对象来解决问题，显然V和M早就被定义死了，它们都不应该处理“解析数据”的问题，理所应当的，“解析数据”这个问题就交给C来完成了。而现在的手机App功能越来越复杂，数据结构也越来越复杂，所以数据解析也就没那么简单了。如果我们继续按照MVC的设计思路，将数据解析的部分放到了Controller里面，那么Controller就将变得相当臃肿。还有相当重要的一点：Controller被设计出来并不是处理数据解析的。1、管理自己的生命周期；2、处理Controller之间的跳转；3、实现Controller容器。这里面根本没有“数据解析”这一项，所以显然，数据解析也不应该由Controller来完成。那么我们的MVC中，M、V、C都不应该处理数据解析，那么由谁来呢？这个问题实际上在面向对象的时候相当好回答：既然目前没有类能够处理这个问题，那么就创建一个新的类出来解决不就好了？所以我们聪明的开发者们就专门为数据解析创建出了一个新的类：ViewModel。这就是MVVM的诞生&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://damuwangs.github.io/img/JavaScript-MVC%E3%80%81MVP%E3%80%81MVVM%E6%A8%A1%E5%BC%8F/MVVM.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;用户端操作View，ViewModel监听视图变化，触发绑定事件&lt;/li&gt;
&lt;li&gt;ViewModel组织好数据，请求服务端处理业务逻辑调用Model层操作数据&lt;/li&gt;
&lt;li&gt;服务端处理完数据及逻辑后，要求 Model 改变数据状态&lt;/li&gt;
&lt;li&gt;ViewModel组装结果数据后自动绑定到View层，用户得到反馈&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;https://damuwangs.github.io/img/JavaScript-MVC%E3%80%81MVP%E3%80%81MVVM%E6%A8%A1%E5%BC%8F/MVVM%E7%BB%84%E6%88%90%E9%83%A8%E5%88%86.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;h1 id=&#34;思考&#34;&gt;思考&lt;/h1&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;ViewModel和Controller的区别&lt;/p&gt;
&lt;p&gt;Controller所要担任的任务更加全面，包括了很多的业务逻辑。而ViewModel则简化甚至剔除了业务逻辑，主要的工作就只是把Model中的数据组装成适合View使用的数据&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;前端MVVM对比MVC的优点&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;MVC开发者在代码中大量调用相同的 DOM API, 处理繁琐 ，操作冗余，使得代码难以维护&lt;/p&gt;
&lt;p&gt;大量的DOM 操作使页面渲染性能降低，加载速度变慢，影响用户体验&lt;/p&gt;
&lt;p&gt;当 Model 频繁发生变化，开发者需要主动更新到View ；当用户的操作导致 Model 发生变化，开发者同样需要将变化的数据同步到Model 中，这样的工作不仅繁琐，而且很难维护复杂多变的数据状态&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;数据驱动： 在以前的模式中，总是先处理业务数据，然后根据的数据变化，去获取DOM的引用然后更新DOM，也是通过DOM来获取用户输入，最后再进行数据的更新。而在MVVM中数据和业务逻辑处于一个独立且抽象的View Model中，ViewModel只要关注数据和业务逻辑，不需要和DOM之间打交道。由数据自动去驱动DOM去自动更新DOM，DOM的改变又同时自动反馈到数据，数据成为主导因素，这样使得在业务逻辑处理只要关心数据，方便且简单&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h1 id=&#34;参考资料&#34;&gt;参考资料&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&#34;http://www.ruanyifeng.com/blog/2015/02/mvcmvp_mvvm.html&#34;&gt;MVC，MVP 和 MVVM 的图示&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.cnblogs.com/iovec/p/7840228.html&#34;&gt;前后端分手大师——MVVM 模式&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.jianshu.com/p/7088249276de&#34;&gt;前端MVVM理论-MVVM&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://blog.csdn.net/qq_42068550/article/details/89480350&#34;&gt;MVC和MVVM的区别&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
- https://damuwangs.github.io/posts/%E7%BC%96%E7%A8%8B/javascript-mvcmvvm%E6%A8%A1%E5%BC%8F/ - </description>
        </item>
    
    
    
        <item>
        <title>UniApp-原生插件开发</title>
        <link>https://damuwangs.github.io/posts/%E7%BC%96%E7%A8%8B/uniapp-%E5%8E%9F%E7%94%9F%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/</link>
        <pubDate>Wed, 20 Oct 2021 00:00:00 +0000</pubDate>
        
        <guid>https://damuwangs.github.io/posts/%E7%BC%96%E7%A8%8B/uniapp-%E5%8E%9F%E7%94%9F%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/</guid>
        <description>DaMuWang https://damuwangs.github.io/posts/%E7%BC%96%E7%A8%8B/uniapp-%E5%8E%9F%E7%94%9F%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/ -&lt;h1 id=&#34;一开发环境&#34;&gt;一、开发环境&lt;/h1&gt;
&lt;h2 id=&#34;java环境18&#34;&gt;Java环境1.8&lt;/h2&gt;
&lt;p&gt;参考：&lt;a href=&#34;https://blog.csdn.net/weixin_44084189/article/details/98966787/&#34;&gt;jdk1.8下载与安装教程&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;android环境&#34;&gt;Android环境&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;软件下载&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://www.androiddevtools.cn&#34;&gt;下载SDK Tools&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://damuwangs.github.io/img/UniApp-%E5%8E%9F%E7%94%9F%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/SDKTools.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;下载完成点击SDK Manager.exe运行&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://damuwangs.github.io/img/UniApp-%E5%8E%9F%E7%94%9F%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/SDKManager.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;需要下载以下插件&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://damuwangs.github.io/img/UniApp-%E5%8E%9F%E7%94%9F%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/%E6%8F%92%E4%BB%B6%E4%B8%8B%E8%BD%BD.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;环境变量配置&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;系统变量下添加变量&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;ANDROID_SDK_HOME，指向Android SDK根目录
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Path新增:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;Android SDK根目录&lt;span style=&#34;color:#f1fa8c&#34;&gt;\p&lt;/span&gt;latform-tools;
Android SDK根目录&lt;span style=&#34;color:#f1fa8c&#34;&gt;\t&lt;/span&gt;ools;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;命令行测试是否配置成功&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;adb &lt;span style=&#34;color:#ff79c6&#34;&gt;(&lt;/span&gt;成功后可以看到adb的版本号及命令行说明等信息&lt;span style=&#34;color:#ff79c6&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;androidstudio&#34;&gt;AndroidStudio&lt;/h2&gt;
&lt;p&gt;参考：&lt;a href=&#34;https://developer.android.google.cn/studio/index.html&#34;&gt;Android Studio官网&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;demo下载&#34;&gt;demo下载&lt;/h2&gt;
&lt;p&gt;参考：&lt;a href=&#34;https://nativesupport.dcloud.net.cn/AppDocs/download/android?id=android-%E7%A6%BB%E7%BA%BFsdk-%E6%AD%A3%E5%BC%8F%E7%89%88&#34;&gt;Android 离线SDK - 正式版&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&#34;二androidstudio运行&#34;&gt;二、AndroidStudio运行&lt;/h1&gt;
&lt;h2 id=&#34;项目导入&#34;&gt;项目导入&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;点击Android Studio菜单选项File—&amp;gt;New—&amp;gt;Import Project&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://damuwangs.github.io/img/UniApp-%E5%8E%9F%E7%94%9F%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/%E5%AF%BC%E5%85%A51.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;导入选择UniPlugin-Hello-As工程，点击OK！等待工程导入完毕&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://damuwangs.github.io/img/UniApp-%E5%8E%9F%E7%94%9F%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/%E5%AF%BC%E5%85%A52.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;导入后切换为Android项目结构，目录如下&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://damuwangs.github.io/img/UniApp-%E5%8E%9F%E7%94%9F%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/%E7%9B%AE%E5%BD%95.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;生成签名文件&#34;&gt;生成签名文件&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;点击Build—&amp;gt;Generate Signed Apk&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://damuwangs.github.io/img/UniApp-%E5%8E%9F%E7%94%9F%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/%E7%94%9F%E6%88%90%E7%AD%BE%E5%90%8D.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;默认选择APK点击下一步&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://damuwangs.github.io/img/UniApp-%E5%8E%9F%E7%94%9F%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/%E7%94%9F%E6%88%90%E7%AD%BE%E5%90%8D2.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;选择生成位置（选择为app模块根目录），输入密码和别名点击下一步&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://damuwangs.github.io/img/UniApp-%E5%8E%9F%E7%94%9F%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/%E7%94%9F%E6%88%90%E7%AD%BE%E5%90%8D3.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;选择类型（默认为debug）点击完成，成功生成.jks文件&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://damuwangs.github.io/img/UniApp-%E5%8E%9F%E7%94%9F%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/%E7%94%9F%E6%88%90%E7%AD%BE%E5%90%8D4.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;申请appkey&#34;&gt;申请Appkey&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;进入jdk bin目录执行指令输入密码读取签名信息&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;keytool -list -v -keystore d:&lt;span style=&#34;color:#f1fa8c&#34;&gt;\1&lt;/span&gt;23.jks -- d:&lt;span style=&#34;color:#f1fa8c&#34;&gt;\1&lt;/span&gt;23.jks为签名文件位置
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://damuwangs.github.io/img/UniApp-%E5%8E%9F%E7%94%9F%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/%E8%AF%BB%E5%8F%96%E7%AD%BE%E5%90%8D%E4%BF%A1%E6%81%AF.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;登录&lt;a href=&#34;https://dev.dcloud.net.cn/&#34;&gt;开发者中心&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;在左侧菜单中选择我创建的应用，点击需要申请的应用&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://damuwangs.github.io/img/UniApp-%E5%8E%9F%E7%94%9F%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/%E6%88%91%E5%88%9B%E5%BB%BA%E7%9A%84%E5%BA%94%E7%94%A8.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;在应用管理界面选择离线打包Key管理，根据需要选择对应平台，输入包名和SHA1，确认无误点击保存，即可获取到对应平台的App&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://damuwangs.github.io/img/UniApp-%E5%8E%9F%E7%94%9F%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/%E7%94%9F%E6%88%90appKey.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;配置及运行&#34;&gt;配置及运行&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;app模块下的AndroidMainfest.xml替换dcloud_appkey对应值&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;meta-data&lt;/span&gt;
    &lt;span style=&#34;color:#50fa7b&#34;&gt;android:name=&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;dcloud_appkey&amp;#34;&lt;/span&gt;
    &lt;span style=&#34;color:#50fa7b&#34;&gt;android:value=&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;decloud开发者中心申请的appkey&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;/&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;app模块下build.gradle修改签名配置&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;signingConfigs {
    config {
      keyAlias &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;jks别名&amp;#39;&lt;/span&gt;
      keyPassword &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;jks密码&amp;#39;&lt;/span&gt;
      storeFile file(&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;xxx.jks&amp;#39;&lt;/span&gt;)
     storePassword &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;jks密码&amp;#39;&lt;/span&gt;
  v1SigningEnabled &lt;span style=&#34;color:#ff79c6&#34;&gt;true&lt;/span&gt;
  v2SigningEnabled &lt;span style=&#34;color:#ff79c6&#34;&gt;true&lt;/span&gt;
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;app模块下asssets—&amp;gt;data—&amp;gt;dcloud_control.xml—&amp;gt;appid替换&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;hbuilder&amp;gt;&lt;/span&gt;
  &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;apps&amp;gt;&lt;/span&gt;
      &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;app&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;appid=&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;decloud开发者中心申请的appid&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;appver=&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;/&amp;gt;&lt;/span&gt;
  &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;/apps&amp;gt;&lt;/span&gt;
&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;/hbuilder&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;点击Android Studio菜单选项Build—&amp;gt;Rebuild Project编译项目&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://damuwangs.github.io/img/UniApp-%E5%8E%9F%E7%94%9F%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/%E7%BC%96%E8%AF%91%E9%A1%B9%E7%9B%AE.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;安装模拟器后点击运行，启动项目&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://damuwangs.github.io/img/UniApp-%E5%8E%9F%E7%94%9F%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/%E5%90%AF%E5%8A%A8%E9%A1%B9%E7%9B%AE.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;启动成功弹出模拟器&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://damuwangs.github.io/img/UniApp-%E5%8E%9F%E7%94%9F%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/%E6%A8%A1%E6%8B%9F%E5%99%A8.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;三插件开发&#34;&gt;三、插件开发&lt;/h1&gt;
&lt;h2 id=&#34;插件注册&#34;&gt;插件注册&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;第一种方式&lt;/p&gt;
&lt;p&gt;在UniPlugin-Hello-AS工程下 “app” Module根目录assets/dcloud_uniplugins.json文件。 在moudles节点下 添加你要注册的Module 或 Component&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;{
  &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;nativePlugins&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt; [
    {
      &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;plugins&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt; [
        {
          &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;module&amp;#34;&lt;/span&gt;,
          &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;DCloud-RichAlert&amp;#34;&lt;/span&gt;,
          &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;class&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;uni.dcloud.io.uniplugin_richalert.RichAlertModule&amp;#34;&lt;/span&gt;
        }
      ]
    }
  ]
}

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;第二种方式
创建一个实体类并实现UniAppHookProxy接口，在onCreate函数中添加组件注册相关参数 或 填写插件需要在启动时初始化的逻辑。&lt;/p&gt;
&lt;p&gt;在UniPlugin-Hello-AS工程下 “app” Module根目录assets/dcloud_uniplugins.json文件，在hooksClass节点添加你创建实现UniAppHookProxy接口的实体类完整名称填入其中即可 (有些需要初始化操作的需求可以在此处添加逻辑，无特殊操作仅使用第一种方式注册即可无需集成UniAppHookProxy接口)&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;RichAlert_AppProxy&lt;/span&gt; &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;implements&lt;/span&gt; UniAppHookProxy &lt;span style=&#34;color:#ff79c6&#34;&gt;{&lt;/span&gt;
    @Override
    &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#8be9fd&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;onCreate&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;(&lt;/span&gt;Application application&lt;span style=&#34;color:#ff79c6&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;{&lt;/span&gt;
        &lt;span style=&#34;color:#6272a4&#34;&gt;//当前uni应用进程回调 仅触发一次 多进程不会触发
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;      &lt;span style=&#34;color:#6272a4&#34;&gt;//可通过UniSDKEngine注册UniModule或者UniComponent
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#ff79c6&#34;&gt;}&lt;/span&gt;
  
  @Override
  &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#8be9fd&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;onSubProcessCreate&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;(&lt;/span&gt;Application application&lt;span style=&#34;color:#ff79c6&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;{&lt;/span&gt;
      &lt;span style=&#34;color:#6272a4&#34;&gt;//其他子进程初始化回调 可用于初始化需要子进程初始化需要的逻辑
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#ff79c6&#34;&gt;}&lt;/span&gt;
&lt;span style=&#34;color:#ff79c6&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;{
  &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;nativePlugins&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt; [
    {
      &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;hooksClass&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;uni.dcloud.io.uniplugin_richalert.RichAlert_AppProxy&amp;#34;&lt;/span&gt;,
      &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;plugins&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt; [
        {
          &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;module&amp;#34;&lt;/span&gt;,
          &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;DCloud-RichAlert&amp;#34;&lt;/span&gt;,
          &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;class&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;uni.dcloud.io.uniplugin_richalert.RichAlertModule&amp;#34;&lt;/span&gt;
        }
      ]
    }
  ]
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;dcloud_uniplugins.json说明&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;nativePlugins： 插件跟节点 可存放多个插件&lt;/li&gt;
&lt;li&gt;hooksClass： 生命周期代理（实现AppHookProxy接口类）格式(完整包名加类名)&lt;/li&gt;
&lt;li&gt;plugins: 插件数组&lt;/li&gt;
&lt;li&gt;name : 注册名称&lt;/li&gt;
&lt;li&gt;class : module 或 component 实体类完整名称&lt;/li&gt;
&lt;li&gt;type : module 或 component类型&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;插件类型&#34;&gt;插件类型&lt;/h2&gt;
&lt;h3 id=&#34;1扩展module&#34;&gt;1、扩展Module&lt;/h3&gt;
&lt;p&gt;扩展非UI的特定功能，调用原生android方法&lt;/p&gt;
&lt;h3 id=&#34;2扩展组件-component&#34;&gt;2、扩展组件 Component&lt;/h3&gt;
&lt;p&gt;使用Android原生控件&lt;/p&gt;
&lt;p&gt;向JS环境发送一些事件，比如click事件，通过uniapp触发事件，在android进行响应&lt;/p&gt;
&lt;h3 id=&#34;3unijscallback结果回调&#34;&gt;3、UniJSCallback结果回调&lt;/h3&gt;
&lt;p&gt;JS调用时，有的场景需要返回一些数据，比如以下例子，返回x、y坐标&lt;/p&gt;
&lt;h3 id=&#34;5globalevent-事件&#34;&gt;5、globalEvent 事件&lt;/h3&gt;
&lt;p&gt;用于页面监听持久性事件，例如定位信息，陀螺仪等的变化&lt;/p&gt;
&lt;h2 id=&#34;插件示例&#34;&gt;插件示例&lt;/h2&gt;
&lt;p&gt;封装了一个 RichAlertModule, 富文本alert弹窗Module，代码可参考UniPlugin-Hello-AS工程中的uniplugin_richalert模块&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;RichAlertModule&lt;/span&gt; &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;extends&lt;/span&gt; UniDestroyableModule &lt;span style=&#34;color:#ff79c6&#34;&gt;{&lt;/span&gt;
    &lt;span style=&#34;color:#ff79c6&#34;&gt;...&lt;/span&gt;
    @UniJSMethod&lt;span style=&#34;color:#ff79c6&#34;&gt;(&lt;/span&gt;uiThread &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;true&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;)&lt;/span&gt;
    &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#8be9fd&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;show&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;(&lt;/span&gt;JSONObject options&lt;span style=&#34;color:#ff79c6&#34;&gt;,&lt;/span&gt; UniJSCallback jsCallback&lt;span style=&#34;color:#ff79c6&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;{&lt;/span&gt;
        &lt;span style=&#34;color:#ff79c6&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;(&lt;/span&gt;mUniSDKInstance&lt;span style=&#34;color:#ff79c6&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#50fa7b&#34;&gt;getContext&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;()&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;instanceof&lt;/span&gt; Activity&lt;span style=&#34;color:#ff79c6&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;{&lt;/span&gt;
            &lt;span style=&#34;color:#ff79c6&#34;&gt;...&lt;/span&gt;
            RichAlert richAlert &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;new&lt;/span&gt; RichAlert&lt;span style=&#34;color:#ff79c6&#34;&gt;(&lt;/span&gt;mUniSDKInstance&lt;span style=&#34;color:#ff79c6&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#50fa7b&#34;&gt;getContext&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;());&lt;/span&gt;
            &lt;span style=&#34;color:#ff79c6&#34;&gt;...&lt;/span&gt;
            richAlert&lt;span style=&#34;color:#ff79c6&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#50fa7b&#34;&gt;show&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;();&lt;/span&gt;
            &lt;span style=&#34;color:#ff79c6&#34;&gt;...&lt;/span&gt;
        &lt;span style=&#34;color:#ff79c6&#34;&gt;}&lt;/span&gt;
    &lt;span style=&#34;color:#ff79c6&#34;&gt;}&lt;/span&gt;
    &lt;span style=&#34;color:#ff79c6&#34;&gt;...&lt;/span&gt;
    &lt;span style=&#34;color:#ff79c6&#34;&gt;...&lt;/span&gt;
    @UniJSMethod&lt;span style=&#34;color:#ff79c6&#34;&gt;(&lt;/span&gt;uiThread &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;true&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;)&lt;/span&gt;
    &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#8be9fd&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;dismiss&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;()&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;{&lt;/span&gt;
        destroy&lt;span style=&#34;color:#ff79c6&#34;&gt;();&lt;/span&gt;
    &lt;span style=&#34;color:#ff79c6&#34;&gt;}&lt;/span&gt;

    @Override
    &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#8be9fd&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;destroy&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;()&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;{&lt;/span&gt;
        &lt;span style=&#34;color:#ff79c6&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;(&lt;/span&gt;alert &lt;span style=&#34;color:#ff79c6&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;null&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; alert&lt;span style=&#34;color:#ff79c6&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#50fa7b&#34;&gt;isShowing&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;())&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;{&lt;/span&gt;
            UniLogUtils&lt;span style=&#34;color:#ff79c6&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#50fa7b&#34;&gt;w&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;Dismiss the active dialog&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;);&lt;/span&gt;
            alert&lt;span style=&#34;color:#ff79c6&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#50fa7b&#34;&gt;dismiss&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;();&lt;/span&gt;
        &lt;span style=&#34;color:#ff79c6&#34;&gt;}&lt;/span&gt;
    &lt;span style=&#34;color:#ff79c6&#34;&gt;}&lt;/span&gt;

&lt;span style=&#34;color:#ff79c6&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;HBuilderX 项目中使用RichAlert示例&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;// require插件名称  
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;const&lt;/span&gt; dcRichAlert &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; uni.requireNativePlugin(&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;DCloud-RichAlert&amp;#39;&lt;/span&gt;);              
&lt;span style=&#34;color:#6272a4&#34;&gt;// 使用插件  
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;dcRichAlert.show({  
    position&lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;bottom&amp;#39;&lt;/span&gt;,  
    title&lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;提示信息&amp;#34;&lt;/span&gt;,  
    titleColor&lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;#FF0000&amp;#39;&lt;/span&gt;,  
    content&lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;&amp;lt;a href=&amp;#39;https://uniapp.dcloud.io/&amp;#39; value=&amp;#39;Hello uni-app&amp;#39;&amp;gt;uni-app&amp;lt;/a&amp;gt; 是一个使用 Vue.js 开发跨平台应用的前端框架!\n免费的\n免费的\n免费的\n重要的事情说三遍&amp;#34;&lt;/span&gt;,  
    contentAlign&lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;left&amp;#39;&lt;/span&gt;,  
    checkBox&lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt; {  
        title&lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;不再提示&amp;#39;&lt;/span&gt;,  
        isSelected&lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;true&lt;/span&gt;  
    },  
    buttons&lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt; [{  
        title&lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;取消&amp;#39;&lt;/span&gt;  
    },  
    {  
        title&lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;否&amp;#39;&lt;/span&gt;  
    },  
    {  
        title&lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;确认&amp;#39;&lt;/span&gt;,  
        titleColor&lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;#3F51B5&amp;#39;&lt;/span&gt;  
    }  
    ]  
}, result =&amp;gt; {  
    &lt;span style=&#34;color:#ff79c6&#34;&gt;switch&lt;/span&gt; (result.type) {  
        &lt;span style=&#34;color:#ff79c6&#34;&gt;case&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;button&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt;  
            console.log(&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;callback---button--&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;+&lt;/span&gt; result.index);  
            &lt;span style=&#34;color:#ff79c6&#34;&gt;break&lt;/span&gt;;  
        &lt;span style=&#34;color:#ff79c6&#34;&gt;case&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;checkBox&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt;  
            console.log(&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;callback---checkBox--&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;+&lt;/span&gt; result.isSelected);  
            &lt;span style=&#34;color:#ff79c6&#34;&gt;break&lt;/span&gt;;  
        &lt;span style=&#34;color:#ff79c6&#34;&gt;case&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;a&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt;  
            console.log(&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;callback---a--&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;+&lt;/span&gt; JSON.stringify(result));  
            &lt;span style=&#34;color:#ff79c6&#34;&gt;break&lt;/span&gt;;  
        &lt;span style=&#34;color:#ff79c6&#34;&gt;case&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;backCancel&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt;  
            console.log(&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;callback---backCancel--&amp;#34;&lt;/span&gt;);  
            &lt;span style=&#34;color:#ff79c6&#34;&gt;break&lt;/span&gt;;  
   }  
})
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h1 id=&#34;四调试与发布&#34;&gt;四、调试与发布&lt;/h1&gt;
&lt;h2 id=&#34;androidstudio调试&#34;&gt;AndroidStudio调试&lt;/h2&gt;
&lt;p&gt;这种用于上层调用已完成，调试底层android插件&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;点击发行—&amp;gt;原生APP-本地打包—&amp;gt;生成本地打包App资源&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://damuwangs.github.io/img/UniApp-%E5%8E%9F%E7%94%9F%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/%E7%94%9F%E6%88%90%E6%9C%AC%E5%9C%B0%E6%89%93%E5%8C%85App%E8%B5%84%E6%BA%90.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;编译成功在unpackage目录下生成资源&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://damuwangs.github.io/img/UniApp-%E5%8E%9F%E7%94%9F%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/%E6%9C%AC%E5%9C%B0%E6%89%93%E5%8C%85%E6%88%90%E5%8A%9F.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;把APP资源文件放入到UniPlugin-Hello-AS工程下app  Module根目录assets/apps目录下&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://damuwangs.github.io/img/UniApp-%E5%8E%9F%E7%94%9F%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/%E5%AF%BC%E5%85%A5AndroidStudio.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;appid注意 一定要统一否则会导致应用无法正常运行&lt;/p&gt;
&lt;p&gt;以dcloud_control.xml配置的appid为准&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://damuwangs.github.io/img/UniApp-%E5%8E%9F%E7%94%9F%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/AppID%E4%B8%80%E8%87%B4%E6%80%A7.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;配置好运行项目即可&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;hbuilderx调试&#34;&gt;HbuilderX调试&lt;/h2&gt;
&lt;p&gt;这种用于底层插件开发完成，调试上层uniapp调用&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;androidStudio编译成功，生成aar&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://damuwangs.github.io/img/UniApp-%E5%8E%9F%E7%94%9F%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/%E7%94%9F%E6%88%90aar.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;创建&lt;a href=&#34;https://nativesupport.dcloud.net.cn/NativePlugin/course/package&#34;&gt;package.json&lt;/a&gt;文件并填写必要的信息&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;{
  &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;RichAlert&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#6272a4&#34;&gt;// 插件名称
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;id&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;DCloud-RichAlert&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#6272a4&#34;&gt;// 插件标识，需要保证唯一性
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;version&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;0.1.3&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#6272a4&#34;&gt;// 插件版本号
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;description&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;示例插件&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#6272a4&#34;&gt;// 插件描述信息
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;_dp_type&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;nativeplugin&amp;#34;&lt;/span&gt;,
  &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;_dp_nativeplugin&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt;{
      &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;android&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt; {
          &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;plugins&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt; [
              {
                  &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;module&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#6272a4&#34;&gt;// 根据上文插件类型填写module或component
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;                  &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;DCloud-RichAlert&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#6272a4&#34;&gt;// 注册插件的名称, 注意：module 的 name 必须以插件id为前缀或和插件id相同
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;                  &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;class&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;uni.dcloud.io.uniplugin_richalert.RichAlertModule&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;// Android项目中dcloud_uniplugins.json中配置的类名
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;              }
          ],
          &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;integrateType&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;aar&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#6272a4&#34;&gt;// 可取值aar|jar
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;          &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;minSdkVersion&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#bd93f9&#34;&gt;16&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;// 支持的Android最低版本，如21
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;      }
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;创建插件文件夹，目录格式如下&lt;/p&gt;
&lt;p&gt;Dcloud-RichAlert为自定义插件名称，aar文件放在android目录下&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://damuwangs.github.io/img/UniApp-%E5%8E%9F%E7%94%9F%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/%E6%8F%92%E4%BB%B6%E7%9B%AE%E5%BD%95.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;配置到uni-app项目下的“nativeplugins”目录&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://damuwangs.github.io/img/UniApp-%E5%8E%9F%E7%94%9F%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/%E6%8F%92%E4%BB%B6%E5%BC%95%E5%85%A5.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;在manifest.json文件的“App原生插件配置”项下点击“选择本地插件”，在列表中选择需要打包生效的插件&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://damuwangs.github.io/img/UniApp-%E5%8E%9F%E7%94%9F%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/%E5%8A%A0%E8%BD%BD%E6%8F%92%E4%BB%B6.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;点击运行—&amp;gt;运行到手机或模拟器—&amp;gt;制作自定义调试基座&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;APPID与开发者中心的相同&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://damuwangs.github.io/img/UniApp-%E5%8E%9F%E7%94%9F%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/%E5%88%B6%E4%BD%9C%E8%87%AA%E5%AE%9A%E4%B9%89%E5%9F%BA%E5%BA%A7.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;制作成功输出以下内容&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://damuwangs.github.io/img/UniApp-%E5%8E%9F%E7%94%9F%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/%E8%87%AA%E5%AE%9A%E4%B9%89%E5%9F%BA%E5%BA%A7%E7%94%9F%E6%88%90.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;uniapp打包时需要点击运行—&amp;gt;运行到手机或模拟器—&amp;gt;运行基座选择—&amp;gt;自定义调试基座&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;注意&#34;&gt;注意&lt;/h1&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;如果出现Android SDK路径不对问题，请在Android Studio中鼠标右键UniPlugin-Hello-AS选择Open Module Settings, 在SDK Location 中设置相关环境路径&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://damuwangs.github.io/img/UniApp-%E5%8E%9F%E7%94%9F%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/SDKLocation.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;项目初始化时如果下方一直提示gradle下载中,则可以手动下载放到gradle安装目录(默认为：C:\Users\Administrator.gradle\wrapper\dists)
替换后重启android Studio正常编译项目&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;关于uniapp自定义基座&lt;/p&gt;
&lt;p&gt;使用HBuilder/HBuilderX开发应用时，可在手机/模拟器上查看运行效果，点击菜单栏“运行”-&amp;gt;“运行到手机或模拟器”使用。
此功能会在手机/模拟器上安装“HBuilder”应用（或者叫HBuilder标准运行基座），在应用开发过程中HBuilder/HBuilderX会将应用资源实时同步到基座并刷新，从而实时查看到修改效果。
上述HBuilder标准运行基座，是由DCloud提前打包好的，使用的是DCloud申请的第三方SDK配置，manifest里大多数设置都无法动态生效，需要再次打包才可以生效。
例如微信分享，不管开发者在manifest里如何配置，使用HBuilder标准运行基座分享后显示的来源一定是“HBuilder”。
但开发者真实打包后的手机应用又无法通过运行方式来调试，这导致涉及manifest配置的内容调测变的很困难。&lt;/p&gt;
&lt;p&gt;为了解决manifest配置相关调试的便利性问题，DCloud提供了制作自定义运行基座的功能，也就是开发者可类似DCloud一样，自己做一个运行基座，里面使用的是自定义的manifest配置。
开发者打包了自定义运行基座，就可以把这个基座运行到手机/Android模拟器上，进行日志查看。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;在uni-app应用中调用uni-app原生插件也必须使用自定义调试基座&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h1 id=&#34;参考资料&#34;&gt;参考资料&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&#34;https://nativesupport.dcloud.net.cn/NativePlugin/course/android&#34;&gt;uniapp原生插件开发&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://nativesupport.dcloud.net.cn/AppDocs/usesdk/appkey&#34;&gt;申请Appkey&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://ask.dcloud.net.cn/question/122811&#34;&gt;安卓打包,显示未配置appkey或配置错误&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
- https://damuwangs.github.io/posts/%E7%BC%96%E7%A8%8B/uniapp-%E5%8E%9F%E7%94%9F%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/ - </description>
        </item>
    
    
    
        <item>
        <title>【待补充】《白夜行》读后感</title>
        <link>https://damuwangs.github.io/posts/%E6%80%9D%E8%80%83/%E7%99%BD%E5%A4%9C%E8%A1%8C%E8%AF%BB%E5%90%8E%E6%84%9F/</link>
        <pubDate>Fri, 15 Oct 2021 00:00:00 +0000</pubDate>
        
        <guid>https://damuwangs.github.io/posts/%E6%80%9D%E8%80%83/%E7%99%BD%E5%A4%9C%E8%A1%8C%E8%AF%BB%E5%90%8E%E6%84%9F/</guid>
        <description>DaMuWang https://damuwangs.github.io/posts/%E6%80%9D%E8%80%83/%E7%99%BD%E5%A4%9C%E8%A1%8C%E8%AF%BB%E5%90%8E%E6%84%9F/ -&lt;h1 id=&#34;人物关系图&#34;&gt;人物关系图&lt;/h1&gt;
&lt;h2 id=&#34;桐原亮司---雪穗&#34;&gt;桐原亮司 - 雪穗&lt;/h2&gt;
&lt;p&gt;警察：笹垣、古贺久志&lt;/p&gt;
&lt;p&gt;当铺：桐原亮司、桐原洋介（恋幼癖）、桐原弥生子、松浦勇&lt;/p&gt;
&lt;p&gt;旧城区：西本雪穗、西本文代、房管、寺崎忠夫&lt;/p&gt;
&lt;p&gt;新城区：唐泽礼子、礼子&lt;/p&gt;
&lt;p&gt;男校：桐原亮司、友彦、奈美江&lt;/p&gt;
&lt;p&gt;欧巴桑：西口奈美江、花冈夕子&lt;/p&gt;
&lt;p&gt;女校：雪穗、川岛江利子、藤村都子、中道正晴（雪穗数学家教）、香苗&lt;/p&gt;
&lt;p&gt;卖盗版软件的公司（后来搬走改卖硬件）&lt;/p&gt;
&lt;p&gt;交际舞协会：一诚、高宫诚&lt;/p&gt;
&lt;p&gt;侦探公司、专利公司：金枝、绘里、高宫诚、三泽千都留&lt;/p&gt;
&lt;p&gt;医药公司：康晴，一诚、筱冢美佳&lt;/p&gt;
&lt;p&gt;医院：典子、藤井、秋吉雄一&lt;/p&gt;
&lt;h1 id=&#34;情节梳理&#34;&gt;情节梳理&lt;/h1&gt;
&lt;h1 id=&#34;读后感&#34;&gt;读后感&lt;/h1&gt;
- https://damuwangs.github.io/posts/%E6%80%9D%E8%80%83/%E7%99%BD%E5%A4%9C%E8%A1%8C%E8%AF%BB%E5%90%8E%E6%84%9F/ - </description>
        </item>
    
    
    
        <item>
        <title>Vue2-响应式原理</title>
        <link>https://damuwangs.github.io/posts/%E7%BC%96%E7%A8%8B/vue2-%E5%93%8D%E5%BA%94%E5%BC%8F%E5%8E%9F%E7%90%86/</link>
        <pubDate>Wed, 13 Oct 2021 00:00:00 +0000</pubDate>
        
        <guid>https://damuwangs.github.io/posts/%E7%BC%96%E7%A8%8B/vue2-%E5%93%8D%E5%BA%94%E5%BC%8F%E5%8E%9F%E7%90%86/</guid>
        <description>DaMuWang https://damuwangs.github.io/posts/%E7%BC%96%E7%A8%8B/vue2-%E5%93%8D%E5%BA%94%E5%BC%8F%E5%8E%9F%E7%90%86/ -&lt;h1 id=&#34;概述&#34;&gt;概述&lt;/h1&gt;
&lt;p&gt;Vue采用数据劫持结合发布者-订阅者模式的方式来实现数据的响应式，&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;监听属性变化&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Vue在初始化的时候，对data对象进行遍历，在这个方法中会调Observe（监听器，观察者）对用户的数据进行监听&lt;/li&gt;
&lt;li&gt;在observe中对数据进行判断，对对象进行循环，使用defineReactive，它是vue中的一个核心方法，用来定义响应式&lt;/li&gt;
&lt;li&gt;defineReactive方法中实例化了一个Dep（发布者），通过Object.defineProperty对数据进行拦截，把这些 property 全部转为 getter/setter。get数据的时候，通过dep.depend触发Watcher（订阅者）的依赖收集，收集订阅者；set时，会对数据进行比较，如果数据发生了变化会通过dep.notify发布通知，通知Watcher，更新视图&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;解析指令&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Vue在初始化时传入当前Vue实例和html根节点的元素标识，进行模板解析&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;首先会取出模板元素将其转化成fragment编译后统一进行dom挂载，这样做比较高效（此为虚拟dom）&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;循环从fragment取出所有元素子节点，进行指令类型判断（以v-text为例），传入指令类型和属性值调用update方法&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;update方法中会将视图与vue实例的data属性绑定渲染页面数据。&lt;/p&gt;
&lt;p&gt;当data属性值发生变化会被defineReactive监听到，然后通知wctaher绑定新的数据更新视图&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;https://damuwangs.github.io/img/Vue2-%E5%93%8D%E5%BA%94%E5%BC%8F%E5%8E%9F%E7%90%86/%E5%93%8D%E5%BA%94%E5%BC%8F%E5%9B%BE%E8%A7%A3.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;h1 id=&#34;代码&#34;&gt;代码&lt;/h1&gt;
&lt;h2 id=&#34;template&#34;&gt;template&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;&amp;lt;&lt;span style=&#34;color:#ff79c6&#34;&gt;div&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;id&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;app&amp;#34;&lt;/span&gt;&amp;gt;
    &lt;span style=&#34;color:#6272a4&#34;&gt;&amp;lt;!-- 双向绑定 --&amp;gt;&lt;/span&gt;
    &amp;lt;&lt;span style=&#34;color:#ff79c6&#34;&gt;input&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;type&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;text&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;v-model&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&amp;gt;
&amp;lt;/&lt;span style=&#34;color:#ff79c6&#34;&gt;div&lt;/span&gt;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;监听属性变化&#34;&gt;监听属性变化&lt;/h2&gt;
&lt;p&gt;初始化vue时会传入一个json格式的对象&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;let&lt;/span&gt; vue &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;new&lt;/span&gt; Vue({
    el&lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;#app&amp;#39;&lt;/span&gt;,
    data&lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt; {
        name&lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;,
    }
})
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;取出该对象并遍历data数据，使用Object.defineProperty()方法来监听每一个属性的变化&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;observe(value){
    &lt;span style=&#34;color:#ff79c6&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#ff79c6&#34;&gt;!&lt;/span&gt;value &lt;span style=&#34;color:#ff79c6&#34;&gt;||&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;typeof&lt;/span&gt; value &lt;span style=&#34;color:#ff79c6&#34;&gt;!==&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;object&amp;#39;&lt;/span&gt;) {
        &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt;
    }
    &lt;span style=&#34;color:#6272a4&#34;&gt;//遍历data
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;Object&lt;/span&gt;.keys(value).forEach(key =&amp;gt;{
        &lt;span style=&#34;color:#ff79c6&#34;&gt;this&lt;/span&gt;.defineReactive(value,key,value[key])
        &lt;span style=&#34;color:#6272a4&#34;&gt;// 代理data中的属性到vue实例上
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#ff79c6&#34;&gt;this&lt;/span&gt;.proxyData(key)
    })
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;使用defineReactive，用来定义响应式&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;defineReactive(data, key, value){
    &lt;span style=&#34;color:#ff79c6&#34;&gt;this&lt;/span&gt;.observe(value) &lt;span style=&#34;color:#6272a4&#34;&gt;//递归解决数据嵌套
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#ff79c6&#34;&gt;const&lt;/span&gt; dep &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;new&lt;/span&gt; Dep()
    &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;Object&lt;/span&gt;.defineProperty(data, key, {
        get(){
            Dep.target &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; dep.addDep(Dep.target)
            &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; value
        },
        set(newVal){
            &lt;span style=&#34;color:#ff79c6&#34;&gt;if&lt;/span&gt; (newVal &lt;span style=&#34;color:#ff79c6&#34;&gt;==&lt;/span&gt; value) {
                &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt;
            }
            value &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; newVal
            dep.notify()
        }
    })
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;因为要实现数据动态绑定所以定义了Dep(依赖管理器)和Watcher(依赖)
Watcher为Dep的子对象，当Watcher初始化时会将当前Watcher实例放进Dep的静态属性target中，然后再读取当前vue实例的数据，触发Object.defineProperty()的getter
Object.defineProperty()触发getter时会先判断全局静态属性是否存在，如果存在则添加Watcher依赖
当数据发生变化时，触发Object.defineProperty()的setter,如果新旧数据没有发生变化则直接return,如果新旧数据发生变化则调用Dep的notify方法循环获取所有依赖进行update&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;// Dep 用来管理依赖(Watcher)
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;class&lt;/span&gt; Dep {
    constructor(){
        &lt;span style=&#34;color:#6272a4&#34;&gt;// 这里存放若干依赖(Watcher),一个Watcher对应一个key
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#ff79c6&#34;&gt;this&lt;/span&gt;.deps &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; [] 
    }

    &lt;span style=&#34;color:#6272a4&#34;&gt;// 添加依赖
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;    addDep(dep){
        &lt;span style=&#34;color:#ff79c6&#34;&gt;this&lt;/span&gt;.deps.push(dep)
    }

    &lt;span style=&#34;color:#6272a4&#34;&gt;// 通知所有依赖
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;    notify(){
        &lt;span style=&#34;color:#ff79c6&#34;&gt;this&lt;/span&gt;.deps.forEach(dep =&amp;gt;{dep.update()})
    }
}

&lt;span style=&#34;color:#6272a4&#34;&gt;// 依赖
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;class&lt;/span&gt; Watcher {
    constructor(vm, key, callback){
        &lt;span style=&#34;color:#ff79c6&#34;&gt;this&lt;/span&gt;.vm &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; vm
        &lt;span style=&#34;color:#ff79c6&#34;&gt;this&lt;/span&gt;.key &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; key
        &lt;span style=&#34;color:#ff79c6&#34;&gt;this&lt;/span&gt;.callback &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; callback
        
        &lt;span style=&#34;color:#6272a4&#34;&gt;// 将当前Watcher实例指定到Dep静态属性target
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;        Dep.target &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;this&lt;/span&gt;
        &lt;span style=&#34;color:#ff79c6&#34;&gt;this&lt;/span&gt;.vm[&lt;span style=&#34;color:#ff79c6&#34;&gt;this&lt;/span&gt;.key] &lt;span style=&#34;color:#6272a4&#34;&gt;// 触发getter,添加依赖
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;        Dep.target &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;null&lt;/span&gt;
        console.log(&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;Watcher&amp;#39;&lt;/span&gt;);
    }

    update(){
        console.log(&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;属性更新了&amp;#39;&lt;/span&gt;)
        &lt;span style=&#34;color:#ff79c6&#34;&gt;this&lt;/span&gt;.callback.call(&lt;span style=&#34;color:#ff79c6&#34;&gt;this&lt;/span&gt;.vm, &lt;span style=&#34;color:#ff79c6&#34;&gt;this&lt;/span&gt;.vm[&lt;span style=&#34;color:#ff79c6&#34;&gt;this&lt;/span&gt;.key])
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;解析指令&#34;&gt;解析指令&lt;/h2&gt;
&lt;p&gt;在数据相应话之后会进行模板的解析，传入当前页面元素和vue实例。首先将元素转化成fragment&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;// 取出宿主元素将其转换成fragment编译后统一进行dom挂载,这样做比较高效
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;node2Fragment(el){
    &lt;span style=&#34;color:#6272a4&#34;&gt;// fragment详细解释查看参考资料
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#ff79c6&#34;&gt;const&lt;/span&gt; frag &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;document&lt;/span&gt;.createDocumentFragment()
    &lt;span style=&#34;color:#6272a4&#34;&gt;//将el中所有子元素搬家至frag中
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;let&lt;/span&gt; child
    &lt;span style=&#34;color:#6272a4&#34;&gt;//每次拿出el里面的首个元素赋值给child,然后把child放进frag
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#ff79c6&#34;&gt;while&lt;/span&gt; (child &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; el.firstChild) {
        frag.appendChild(child)
    }
    &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; frag
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;解析指令&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;compile(el){
    &lt;span style=&#34;color:#6272a4&#34;&gt;//获取元素子节点
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#ff79c6&#34;&gt;const&lt;/span&gt; childNodes &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; el.childNodes 
    &lt;span style=&#34;color:#6272a4&#34;&gt;// 将结果转换成数组进行遍历
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;Array&lt;/span&gt;.from(childNodes).forEach(node =&amp;gt; {
        &lt;span style=&#34;color:#6272a4&#34;&gt;//类型判断（nodeType详细解析查看参考资料）
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#ff79c6&#34;&gt;if&lt;/span&gt; (node.nodeType &lt;span style=&#34;color:#ff79c6&#34;&gt;===&lt;/span&gt; &lt;span style=&#34;color:#bd93f9&#34;&gt;1&lt;/span&gt;) {
            &lt;span style=&#34;color:#6272a4&#34;&gt;// 元素
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;            &lt;span style=&#34;color:#6272a4&#34;&gt;// 查找k-, @, :
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;            &lt;span style=&#34;color:#ff79c6&#34;&gt;const&lt;/span&gt; nodeAttrs &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; node.attributes &lt;span style=&#34;color:#6272a4&#34;&gt;//拿出节点所有属性
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;            &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;Array&lt;/span&gt;.from(nodeAttrs).forEach(attr =&amp;gt; {
                &lt;span style=&#34;color:#ff79c6&#34;&gt;const&lt;/span&gt; attrName &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; attr.name &lt;span style=&#34;color:#6272a4&#34;&gt;// 属性名：v-model
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;                &lt;span style=&#34;color:#ff79c6&#34;&gt;const&lt;/span&gt; attrValue &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; attr.value &lt;span style=&#34;color:#6272a4&#34;&gt;// 属性值：name
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;                &lt;span style=&#34;color:#ff79c6&#34;&gt;if&lt;/span&gt; (attrName.indexOf(&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;v-&amp;#39;&lt;/span&gt;) &lt;span style=&#34;color:#ff79c6&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#bd93f9&#34;&gt;0&lt;/span&gt;) {
                    &lt;span style=&#34;color:#6272a4&#34;&gt;//如果是指令则截取掉前缀v-
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;                    &lt;span style=&#34;color:#ff79c6&#34;&gt;const&lt;/span&gt; dir &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; attrName.substring(&lt;span style=&#34;color:#bd93f9&#34;&gt;2&lt;/span&gt;)
                    &lt;span style=&#34;color:#6272a4&#34;&gt;// 执行指令
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;                    &lt;span style=&#34;color:#6272a4&#34;&gt;// this[dir] = this.model()
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;                    &lt;span style=&#34;color:#ff79c6&#34;&gt;this&lt;/span&gt;[dir] &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;this&lt;/span&gt;[dir](node, &lt;span style=&#34;color:#ff79c6&#34;&gt;this&lt;/span&gt;.vm, attrValue)
                }              
            })
        }
        &lt;span style=&#34;color:#6272a4&#34;&gt;//递归子节点
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#ff79c6&#34;&gt;if&lt;/span&gt; (node.childNodes &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; node.childNodes.length &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#bd93f9&#34;&gt;0&lt;/span&gt;) {
            &lt;span style=&#34;color:#ff79c6&#34;&gt;this&lt;/span&gt;.compile(node)
        }
    })
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;绑定视图&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;model(node, vm, attrValue){
	&lt;span style=&#34;color:#ff79c6&#34;&gt;this&lt;/span&gt;.update(node, vm, attrValue, &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;model&amp;#39;&lt;/span&gt;) 
    &lt;span style=&#34;color:#6272a4&#34;&gt;// 视图对模型的响应
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;    node.addEventListener(&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;input&amp;#39;&lt;/span&gt;,e =&amp;gt; {
        vm[attrValue] &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; e.target.value
    })
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;通过wctaher监听数据变化更新视图&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;// 参数：节点、vue实例、指令值(name)、指令类型(model)
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;update(node, vm, attrValue, dir){
    &lt;span style=&#34;color:#6272a4&#34;&gt;// 根据指令名称+Updater拼接要执行的修改方法(类似java的反射)
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#6272a4&#34;&gt;// updateFn = modelUpdater
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#ff79c6&#34;&gt;const&lt;/span&gt; updateFn &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;this&lt;/span&gt;[dir&lt;span style=&#34;color:#ff79c6&#34;&gt;+&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;Updater&amp;#39;&lt;/span&gt;]
    &lt;span style=&#34;color:#6272a4&#34;&gt;// 第一次更新
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;    updateFn &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; updateFn(node, vm[attrValue])
    &lt;span style=&#34;color:#6272a4&#34;&gt;// 依赖收集
&lt;/span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#ff79c6&#34;&gt;new&lt;/span&gt; Watcher(vm, attrValue, &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;function&lt;/span&gt;(value){
        updateFn &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; updateFn(node, value)
    })
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;绑定新数据刷新视图&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;modelUpdater(node, value){
    node.value &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; value
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h1 id=&#34;参考资料&#34;&gt;参考资料&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&#34;https://www.w3school.com.cn/jsref/prop_node_nodetype.asp&#34;&gt;HTML DOM nodeType 属性&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.jianshu.com/p/8ff10b4cf929&#34;&gt;Document.createDocumentFragment()&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://codepen.io/damuwangs/pen/RwZPKjw&#34;&gt;codepen-Vue2-响应式原理&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
- https://damuwangs.github.io/posts/%E7%BC%96%E7%A8%8B/vue2-%E5%93%8D%E5%BA%94%E5%BC%8F%E5%8E%9F%E7%90%86/ - </description>
        </item>
    
    
  </channel>
</rss> 